<?xml version="1.0" encoding="utf-8"?>
<Simulations xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Version="6">
  <Name>Simulations</Name>
  <DataStore>
    <Name>DataStore</Name>
    <AutoExport>false</AutoExport>
    <MaximumResultsPerPage>0</MaximumResultsPerPage>
  </DataStore>
  <Folder>
    <Name>Slurp</Name>
    <Simulation>
      <Name>Slurp1</Name>
      <Clock>
        <Name>Clock</Name>
        <StartDate>1980-07-01T00:00:00</StartDate>
        <EndDate>1981-06-30T00:00:00</EndDate>
      </Clock>
      <Weather>
        <Name>Weather</Name>
        <FileName>%root%\Examples\WeatherFiles\lincoln.met</FileName>
        <ExcelWorkSheetName />
      </Weather>
      <Summary>
        <Name>Summary</Name>
      </Summary>
      <SoilArbitrator>
        <Name>SoilArbitrator</Name>
      </SoilArbitrator>
      <Zone>
        <Name>Field</Name>
        <Folder>
          <Name>Managers</Name>
          <Manager>
            <Name>AutomaticFertiliser</Name>
            <Script>
              <AllowFertiliser>yes</AllowFertiliser>
              <Depth2SoilN>500</Depth2SoilN>
              <CriticalSoilN>20</CriticalSoilN>
              <FertNAmount>25</FertNAmount>
              <FertType>UreaN</FertType>
              <FertApplicationDepth>1</FertApplicationDepth>
              <FertMinimumDays>1</FertMinimumDays>
            </Script>
            <Code><![CDATA[using System;
using Models.Core;
using Models.PMF;
using Models.Soils;
using APSIM.Shared.Utilities;
using System.Xml.Serialization;

namespace Models
{
	[Serializable]
	public class Script : Model
	{
		[Link] Clock Clock;
		[Link] Fertiliser fertiliser;
		[Link] ISummary summary = null;
		[Link] Soil Soil;

		//User inputs from properties tab
		[Description("Turn ferliser applications on? ")]
		public yesnoType AllowFertiliser { get; set; }
		
		[Description("Depth to calculate available soil N (mm): ")]
		public double Depth2SoilN { get; set; }

		[Description("Minimum available N, triggers an application (kgN/ha): ")]
		public double CriticalSoilN { get; set; }

		[Description("Amount of N fertiliser for each application (kgN/ha): ")]
		public double FertNAmount { get; set; }

		[Description("Type of N fertiliser to apply: ")]
		public Fertiliser.Types FertType { get; set; }

		[Description("Depth at which to apply the fertiliser (mm): ")]
		public double FertApplicationDepth { get; set; }
	   
		[Description("Minimum period between applications (days): ")]
		public double FertMinimumDays { get; set; }
	   
		public enum yesnoType
		{
			/// <summary>a positive answer</summary>
			yes,
			/// <summary>a negative answer</summary>
			no
		}

		[XmlIgnore] public double TopMineralN { get; set; }
		
		private DateTime lastApplicationDate;
		private bool fertiliserIsAllowed;
		private int nLayers;

		[EventSubscribe("StartOfSimulation")]
		private void OnStartOfSimulation(object sender, EventArgs e)
		{
			fertiliserIsAllowed = (AllowFertiliser == yesnoType.yes);
			nLayers = Soil.SoilWater.Thickness.Length;
		}

		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			double daysSinceLastApplication = (Clock.Today - lastApplicationDate).TotalDays;
			
			// get the N stored in the soil
			double depthFromSurface = 0.0;
			double fracLayer = 0.0;
			TopMineralN = 0.0;
			for (int layer = 0; layer < nLayers; layer++)
			{
				fracLayer = Math.Min(1.0, (Depth2SoilN - depthFromSurface) / Soil.SoilWater.Thickness[layer]);
				TopMineralN += (Soil.SoilNitrogen.NO3[layer]
				+ Soil.SoilNitrogen.NH4[layer]
				+ Soil.SoilNitrogen.urea[layer])
				* fracLayer;
				depthFromSurface += Soil.SoilWater.Thickness[layer];
				if (depthFromSurface >= Depth2SoilN)
					layer = nLayers;
			}

			if (fertiliserIsAllowed && (daysSinceLastApplication >= FertMinimumDays) && (TopMineralN <= CriticalSoilN))
			{
				fertiliser.Apply(FertNAmount, FertType, FertApplicationDepth);
				lastApplicationDate = Clock.Today;
			}
		}
	}
}
]]></Code>
          </Manager>
          <Manager>
            <Name>AutomaticIrrigation</Name>
            <Script>
              <allowIrrigation>yes</allowIrrigation>
              <seasonStart>15-Aug</seasonStart>
              <seasonEnd>30-May</seasonEnd>
              <seasonsAllocation>10000</seasonsAllocation>
              <triggerDeficit>75</triggerDeficit>
              <targetDeficit>99</targetDeficit>
              <returndays>1</returndays>
              <maximumAmount>30</maximumAmount>
              <depthPAWC>300</depthPAWC>
            </Script>
            <Code><![CDATA[using System;
using Models.Core;
using Models.PMF;
using Models.Soils;
using System.Xml.Serialization;
using Models.PMF;
using APSIM.Shared.Utilities;

        
namespace Models
{
	[Serializable] 
	[System.Xml.Serialization.XmlInclude(typeof(Model))]
	public class Script : Model
	{
		//Communication to other modules
		[Link] ISummary summary = null;
		[Link] Irrigation Irrigation;
		[Link] Clock Clock;
		[Link] Soil Soil;
		[Link(IsOptional = true)] ICrop existingCrop;
	   
		//User inputs from properties tab
		[Description("Turn irrigation on?")]
		public answerType allowIrrigation { get; set; }
		[Description("Start of irrigation season (dd-MMM)")]
		public string seasonStart { get; set; }
		[Description("End of irrigation season (dd-MMM)")]
		public string seasonEnd { get; set; }
		[Description("Season allocation (mm)")]
		public double seasonsAllocation { get; set; }
		[Description("Deficit to trigger irrigation (% PAWC)")]
		public double triggerDeficit { get; set; }
		[Description("Deficit to stop irrigaton (% PAWC)")]
		public double targetDeficit { get; set; }
		[Description("Minimum days for irrigation to return")]
		public double returndays { get; set; }
		[Description("Maximum irrigation application (mm/day)")]
		public double maximumAmount { get; set; }
		[Description("Depth to calculate PAWC (mm)")]
		public double depthPAWC { get; set; }
	   
		public enum answerType
		{
			/// <summary>a positive answer</summary>
			yes,
			/// <summary>a negative answer</summary>
			no
		}

		//Class members
		[XmlIgnore] public double TopSWdeficit { get; set; }
		[XmlIgnore] public double TopSWC { get; set; }
		[XmlIgnore] public double DaysSinceIrrigation { get; set; }
		[XmlIgnore] public double AmountToApply { get; set; }
		[XmlIgnore] public double SeasonAppliedAmount { get; set; }
		
		private bool IrrigationIsAllowed { get; set; }
		private bool SeasonIsOpen { get; set; }
		private bool CropIsActive { get; set; }
		private bool IrrigatorIsAvailable { get; set; }
		private bool SoilIsDry { get; set; }

		private DateTime StartDate;
		private DateTime EndDate;
		private double TopDUL;
		private double TopLL;
		private int nLayers;
	
		//Calculate static soil variables
		[EventSubscribe("StartOfSimulation")]
		private void OnStartOfSimulation(object sender, EventArgs e)
		{   
			//Set the season dates
			StartDate = DateTime.Parse(seasonStart + "-" + Clock.Today.Year.ToString());
			EndDate = DateTime.Parse(seasonEnd + "-" + Clock.Today.Year.ToString());
			
			//Can we irrigate at all?
			IrrigationIsAllowed = false; 
			if (allowIrrigation == answerType.yes)
				IrrigationIsAllowed = true; 

			//Calculate soil water variables
			double depthFromSurface = 0.0;
			double fracLayer = 0.0;
			nLayers = Soil.SoilWater.Thickness.Length;
			for (int layer = 0; layer < nLayers; layer++)
			{
				fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / Soil.SoilWater.Thickness[layer]);
				TopLL += Soil.SoilWater.LL15mm[layer] * fracLayer;
				TopDUL += Soil.SoilWater.DULmm[layer] * fracLayer;
				depthFromSurface += Soil.SoilWater.Thickness[layer];
				if (depthFromSurface >= depthPAWC)
					layer = nLayers;
			}
		}
	   	  
		//Determine daily requirement for irrigation
		[EventSubscribe("StartOfDay")]
		private void OnStartOfDay(object sender, EventArgs e)
		{
			//Can we irrigate today?		  
			SeasonIsOpen = isBetween(Clock.Today, StartDate, EndDate);

			//Is there a crop in the ground that needs irrigation?
			CropIsActive = false;
			if ((existingCrop != null) && (existingCrop.IsAlive))
				CropIsActive = true;
	      
			//Is the irrigator available?
			IrrigatorIsAvailable = false;
			DaysSinceIrrigation += 1;
			if (DaysSinceIrrigation >= returndays)
				IrrigatorIsAvailable = true;
	      
			//Is the soil dry enough to require irrigation?
			SoilIsDry = false;
			double depthFromSurface = 0.0;
			double fracLayer = 0.0;
			TopSWC = 0.0;
			for (int layer = 0; layer < nLayers; layer++)
			//for (int layer = 0; depthFromSurface < depthPAWC + Soil.SoilWater.Thickness[layer]; layer++)
			{
				fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / Soil.SoilWater.Thickness[layer]);
				TopSWC += Soil.SoilWater.SWmm[layer] * fracLayer;
				depthFromSurface += Soil.SoilWater.Thickness[layer];
				if (depthFromSurface >= depthPAWC)
					layer = nLayers;
			}
			
			TopSWdeficit = TopSWC - TopDUL;
			if (Math.Max(0.0, -TopSWdeficit) >= (TopDUL - TopLL) * (100 - triggerDeficit) / 100)
				SoilIsDry = true;
	            
			//Are all the conditions ratifying irrigation
			if (IrrigationIsAllowed && SeasonIsOpen && CropIsActive && IrrigatorIsAvailable && SoilIsDry)
			{
				//Lets bloody well irrigate then!!!!
				AmountToApply = TopDUL * targetDeficit / 100 - TopSWC;
				AmountToApply = Math.Max(0.0, Math.Min(AmountToApply, seasonsAllocation - SeasonAppliedAmount));
				Irrigation.Apply(AmountToApply);
				DaysSinceIrrigation = 0;
				SeasonAppliedAmount += AmountToApply;
			}
		}
		
		///Checks whether theDate is between iniDate and endDate (non-year specific)
		private bool isBetween(DateTime theDay, DateTime iniDate, DateTime endDate)
		{
			bool result = false;
			if (iniDate.DayOfYear < endDate.DayOfYear)
			{
				// period is within one year, ex: summer in the northern hemisphere
				if ((theDay.DayOfYear >= iniDate.DayOfYear) && (theDay.DayOfYear <= endDate.DayOfYear))
					result = true;
			}
			else
			{
				// period goes over the end of the year, ex: summer in the southern hemisphere
				if ((theDay.DayOfYear >= iniDate.DayOfYear) || (theDay.DayOfYear <= endDate.DayOfYear))
					result = true;
			}
			
			return result;
		}
	}
}
]]></Code>
          </Manager>
          <Manager>
            <Name>SlurpSowingRule</Name>
            <Script>
              <CultivarName>StaticCrop</CultivarName>
              <InitialRootDepth>600</InitialRootDepth>
              <SowingDate>1980-07-01</SowingDate>
            </Script>
            <Code><![CDATA[
using System;
using Models.Core;
using Models.PMF;
using APSIM.Shared.Utilities;
        
namespace Models
{
	[Serializable] 
	[System.Xml.Serialization.XmlInclude(typeof(Model))]
	public class Script : Model
	{
		[Link] Plant Slurp;
		[Link] Clock Clock;

		[Description("Cultivar")]
		public string CultivarName { get; set; }
		[Description("Initial Root Depth")]
		public double InitialRootDepth { get; set; }
		[Description("Sowing Date")]
		public DateTime SowingDate { get; set; }

               
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == SowingDate)
				Slurp.Sow(cultivar: CultivarName, population: 1, depth: InitialRootDepth, rowSpacing: 150);
			//Potato.Sow(... Contains the following arguements:
			//Population  double  Optional  Seeds sowing/m2.  Default is zero
			//Cultivar    string  Required  "NameOfCultivar"
			//Depth       double  Optional  Depth (mm) seed sown.   Default is 100mm 
			//MaxCover    double  Optional  Proportion (0-1) of the ground row crop will cover.   Default is 1.0
			//BudNumber   double  Optional  Number of mainstems per seed sown.  Default is 1.0
			//RowSpacing  double  Optional  Spaceing (mm) between drill rows when crop is sown.  Default is 150mm
			//CropClass   string  Optional  Crop class to instantiate when crop is sown.  Default is "Plant"
		}
	}
}
				]]></Code>
          </Manager>
          <Manager>
            <Name>ResetProduction</Name>
            <Script>
              <OverRidePath>Slurp.Leaf.Photosynthesis.FixedValue</OverRidePath>
              <OverRideInteger>1</OverRideInteger>
              <ChangeDate>1980-07-01</ChangeDate>
            </Script>
            <Code><![CDATA[using System;
using Models.Core;
using System.Collections.Generic;
using System.Text;
using Models.PMF;
using Models;
using System.Xml.Serialization;
using APSIM.Shared.Utilities;

namespace Models
{
	[Serializable] 
	public class Script : Model
	{
		[Link] Plant Plant;
		[Link] Clock Clock;
		[Link] Zone zone;
		
		[Description("Path for coefficient to be Overwritten")]
		public string OverRidePath { get; set; }
		[Description("Value for new coefficient Integer")]
		public int OverRideInteger { get; set; }
		[Description("Sowing Date")]
		public DateTime ChangeDate { get; set; }
        
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == ChangeDate)
			{
				object ResetValue = OverRideInteger;
				zone.Set(OverRidePath, ResetValue);
			}
		}
	}
}
	   ]]></Code>
          </Manager>
          <Manager>
            <Name>ResetLAI</Name>
            <Script>
              <OverRidePath>Slurp.Leaf.LAIFunction.FixedValue</OverRidePath>
              <OverRideInterger>2</OverRideInterger>
              <ChangeDate>1980-07-01</ChangeDate>
            </Script>
            <Code><![CDATA[using System;
using Models.Core;
using System.Collections.Generic;
using System.Text;
using Models.PMF;
using Models;
using System.Xml.Serialization;
using APSIM.Shared.Utilities;

namespace Models
{
	[Serializable] 
	public class Script : Model
	{
		[Link] Plant Plant;
		[Link] Clock Clock;
		[Link] Zone zone;
		
		[Description("Path for coefficient to be Overwritten")]
		public string OverRidePath { get; set; }
		[Description("Value for new coefficient Interger")]
		public int OverRideInterger { get; set; }
		[Description("Sowing Date")]
		public DateTime ChangeDate { get; set; }
        
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == ChangeDate)
			{
				object ResetValue = OverRideInterger;
				zone.Set(OverRidePath, ResetValue);
			}
		}
	}
}
	   ]]></Code>
          </Manager>
        </Folder>
        <MicroClimate>
          <Name>MicroClimate</Name>
          <a_interception>0</a_interception>
          <b_interception>0</b_interception>
          <c_interception>0</c_interception>
          <d_interception>0</d_interception>
          <soil_albedo>0.23</soil_albedo>
          <sun_angle>15</sun_angle>
          <soil_heat_flux_fraction>0.4</soil_heat_flux_fraction>
          <night_interception_fraction>0.5</night_interception_fraction>
          <refheight>2</refheight>
          <albedo>0.29366217672824863</albedo>
          <emissivity>0.96</emissivity>
          <RadIntTotal>0</RadIntTotal>
        </MicroClimate>
        <Irrigation>
          <Name>Irrigation</Name>
        </Irrigation>
        <Fertiliser>
          <Name>Fertiliser</Name>
        </Fertiliser>
        <SurfaceOrganicMatter>
          <Name>SurfaceOrganicMatter</Name>
          <ReportAdditions>no</ReportAdditions>
          <ReportRemovals>no</ReportRemovals>
          <ResidueTypes>
            <Name>ResidueTypes</Name>
            <LoadFromResource>ResidueTypes</LoadFromResource>
          </ResidueTypes>
          <TillageTypes>
            <Name>TillageTypesList</Name>
            <TillageType />
          </TillageTypes>
          <Pools>
            <Pool>
              <PoolName>Sward</PoolName>
              <ResidueType>grass</ResidueType>
              <Mass>1000</Mass>
              <CNRatio>15</CNRatio>
              <CPRatio>NaN</CPRatio>
              <StandingFraction>0</StandingFraction>
            </Pool>
          </Pools>
          <PoolName>Sward</PoolName>
          <type>grass</type>
          <mass>1000</mass>
          <standing_fraction>0</standing_fraction>
          <cpr />
          <cnr>15</cnr>
          <CriticalResidueWeight>2000</CriticalResidueWeight>
          <OptimumDecompTemp>20</OptimumDecompTemp>
          <MaxCumulativeEOS>20</MaxCumulativeEOS>
          <CNRatioDecompCoeff>0.277</CNRatioDecompCoeff>
          <CNRatioDecompThreshold>25</CNRatioDecompThreshold>
          <TotalLeachRain>25</TotalLeachRain>
          <MinRainToLeach>10</MinRainToLeach>
          <CriticalMinimumOrganicC>0.004</CriticalMinimumOrganicC>
          <DefaultCPRatio>0</DefaultCPRatio>
          <DefaultStandingFraction>0</DefaultStandingFraction>
          <StandingExtinctCoeff>0.5</StandingExtinctCoeff>
          <FractionFaecesAdded>0.5</FractionFaecesAdded>
        </SurfaceOrganicMatter>
        <SoluteManager>
          <Name>SoluteManager</Name>
        </SoluteManager>
        <Soil>
          <Name>LismoreSoil</Name>
          <Analysis>
            <Name>Analysis</Name>
            <Thickness>
              <double>150</double>
              <double>150</double>
              <double>200</double>
              <double>150</double>
              <double>250</double>
              <double>300</double>
              <double>300</double>
            </Thickness>
            <Rocks>
              <double>0</double>
              <double>0</double>
              <double>10</double>
              <double>40</double>
              <double>60</double>
              <double>70</double>
              <double>70</double>
            </Rocks>
            <Texture />
            <MunsellColour />
            <PH>
              <double>6</double>
              <double>6</double>
              <double>6</double>
              <double>6</double>
              <double>6</double>
              <double>6</double>
              <double>6</double>
            </PH>
            <CEC>
              <double>12.5</double>
              <double>10</double>
              <double>9</double>
              <double>5</double>
              <double>4</double>
              <double>4</double>
              <double>4</double>
            </CEC>
            <ParticleSizeSand>
              <double>15</double>
              <double>20</double>
              <double>25</double>
              <double>35</double>
              <double>40</double>
              <double>40</double>
              <double>40</double>
            </ParticleSizeSand>
            <ParticleSizeSilt>
              <double>65</double>
              <double>65</double>
              <double>63</double>
              <double>57</double>
              <double>54</double>
              <double>55</double>
              <double>55</double>
            </ParticleSizeSilt>
            <ParticleSizeClay>
              <double>20</double>
              <double>15</double>
              <double>12</double>
              <double>8</double>
              <double>6</double>
              <double>5</double>
              <double>5</double>
            </ParticleSizeClay>
            <PHUnits>Water</PHUnits>
            <BoronUnits>HotWater</BoronUnits>
          </Analysis>
          <Water>
            <Name>Water</Name>
            <SoilCrop>
              <Name>SwardSoil</Name>
              <LL>
                <double>0.15</double>
                <double>0.14</double>
                <double>0.06</double>
                <double>0.02</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0.01</double>
              </LL>
              <KL>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.08</double>
                <double>0.04</double>
                <double>0.01</double>
                <double>0</double>
                <double>0</double>
              </KL>
              <XF>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>0</double>
                <double>0</double>
              </XF>
            </SoilCrop>
            <SoilCrop>
              <Name>RyegrassSoil</Name>
              <LL>
                <double>0.15</double>
                <double>0.14</double>
                <double>0.06</double>
                <double>0.02</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0.01</double>
              </LL>
              <KL>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.08</double>
                <double>0.04</double>
                <double>0.01</double>
                <double>0</double>
                <double>0</double>
              </KL>
              <XF>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>0</double>
                <double>0</double>
              </XF>
            </SoilCrop>
            <SoilCrop>
              <Name>WhiteCloverSoil</Name>
              <LL>
                <double>0.15</double>
                <double>0.14</double>
                <double>0.06</double>
                <double>0.02</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0.01</double>
              </LL>
              <KL>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.08</double>
                <double>0.04</double>
                <double>0.01</double>
                <double>0</double>
                <double>0</double>
              </KL>
              <XF>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>0</double>
                <double>0</double>
              </XF>
            </SoilCrop>
            <SoilCrop>
              <Name>SlurpSoil</Name>
              <LL>
                <double>0.15</double>
                <double>0.14</double>
                <double>0.06</double>
                <double>0.02</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0.01</double>
              </LL>
              <KL>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.08</double>
                <double>0.04</double>
                <double>0.01</double>
                <double>0</double>
                <double>0</double>
              </KL>
              <XF>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>0</double>
                <double>0</double>
              </XF>
            </SoilCrop>
            <Thickness>
              <double>150</double>
              <double>150</double>
              <double>200</double>
              <double>150</double>
              <double>250</double>
              <double>300</double>
              <double>300</double>
            </Thickness>
            <BD>
              <double>1.3</double>
              <double>1.35</double>
              <double>1</double>
              <double>0.53</double>
              <double>0.31</double>
              <double>0.3</double>
              <double>0.3</double>
            </BD>
            <AirDry>
              <double>0.05</double>
              <double>0.12</double>
              <double>0.055</double>
              <double>0.015</double>
              <double>0.01</double>
              <double>0.01</double>
              <double>0.01</double>
            </AirDry>
            <LL15>
              <double>0.15</double>
              <double>0.14</double>
              <double>0.055</double>
              <double>0.015</double>
              <double>0.01</double>
              <double>0.01</double>
              <double>0.01</double>
            </LL15>
            <DUL>
              <double>0.36</double>
              <double>0.34</double>
              <double>0.19</double>
              <double>0.065</double>
              <double>0.04</double>
              <double>0.03</double>
              <double>0.03</double>
            </DUL>
            <SAT>
              <double>0.45</double>
              <double>0.43</double>
              <double>0.25</double>
              <double>0.15</double>
              <double>0.11</double>
              <double>0.11</double>
              <double>0.11</double>
            </SAT>
            <KS>
              <double>5000</double>
              <double>2500</double>
              <double>3000</double>
              <double>10000</double>
              <double>17500</double>
              <double>20000</double>
              <double>20000</double>
            </KS>
          </Water>
          <SoilWater>
            <Name>SoilWater</Name>
            <SummerDate>1-Nov</SummerDate>
            <SummerU>6</SummerU>
            <SummerCona>3.5</SummerCona>
            <WinterDate>1-apr</WinterDate>
            <WinterU>2</WinterU>
            <WinterCona>2</WinterCona>
            <DiffusConst>88</DiffusConst>
            <DiffusSlope>35</DiffusSlope>
            <Salb>0.13</Salb>
            <CN2Bare>73</CN2Bare>
            <CNRed>20</CNRed>
            <CNCov>0.8</CNCov>
            <slope>0</slope>
            <discharge_width>0</discharge_width>
            <catchment_area>0</catchment_area>
            <max_pond>0</max_pond>
            <Thickness>
              <double>150</double>
              <double>150</double>
              <double>200</double>
              <double>150</double>
              <double>250</double>
              <double>300</double>
              <double>300</double>
            </Thickness>
            <SWCON>
              <double>0.5</double>
              <double>0.52</double>
              <double>0.55</double>
              <double>0.6</double>
              <double>0.65</double>
              <double>0.65</double>
              <double>0.65</double>
            </SWCON>
            <KLAT>
              <double>0</double>
              <double>0</double>
              <double>0</double>
              <double>0</double>
              <double>0</double>
              <double>0</double>
              <double>0</double>
            </KLAT>
            <residueinterception>0</residueinterception>
          </SoilWater>
          <SoilNitrogen>
            <Name>SoilNitrogen</Name>
            <fom_type>
              <string>default</string>
              <string>manure</string>
              <string>mucuna</string>
              <string>lablab</string>
              <string>shemp</string>
              <string>stable</string>
            </fom_type>
            <fract_carb>
              <double>0.2</double>
              <double>0.3</double>
              <double>0.54</double>
              <double>0.57</double>
              <double>0.45</double>
              <double>0</double>
            </fract_carb>
            <fract_cell>
              <double>0.7</double>
              <double>0.3</double>
              <double>0.37</double>
              <double>0.37</double>
              <double>0.47</double>
              <double>0.1</double>
            </fract_cell>
            <fract_lign>
              <double>0.1</double>
              <double>0.4</double>
              <double>0.09</double>
              <double>0.06</double>
              <double>0.08</double>
              <double>0.9</double>
            </fract_lign>
            <wfpsN2N2O_x>
              <double>22</double>
              <double>88</double>
            </wfpsN2N2O_x>
            <wfpsN2N2O_y>
              <double>0.1</double>
              <double>1</double>
            </wfpsN2N2O_y>
            <oc>
              <double>3.7136764881329496</double>
              <double>2.4698281813043792</double>
              <double>1.2383961716086014</double>
              <double>0.49836009167083023</double>
              <double>0.25025052330473485</double>
              <double>0.15035274660681502</double>
              <double>0.10019396267774858</double>
            </oc>
          </SoilNitrogen>
          <SoilOrganicMatter>
            <Name>SoilOrganicMatter</Name>
            <RootCN>40</RootCN>
            <RootWt>1000</RootWt>
            <SoilCN>12</SoilCN>
            <EnrACoeff>7.4</EnrACoeff>
            <EnrBCoeff>0.2</EnrBCoeff>
            <Thickness>
              <double>150</double>
              <double>150</double>
              <double>200</double>
              <double>150</double>
              <double>250</double>
              <double>300</double>
              <double>300</double>
            </Thickness>
            <Depth>
              <string>0-15</string>
              <string>15-30</string>
              <string>30-50</string>
              <string>50-65</string>
              <string>65-90</string>
              <string>90-120</string>
              <string>120-150</string>
            </Depth>
            <OC>
              <double>3</double>
              <double>1</double>
              <double>0.6</double>
              <double>0.4</double>
              <double>0.25</double>
              <double>0.15</double>
              <double>0.1</double>
            </OC>
            <FBiom>
              <double>0.04</double>
              <double>0.02</double>
              <double>0.02</double>
              <double>0.01</double>
              <double>0.01</double>
              <double>0</double>
              <double>0</double>
            </FBiom>
            <FInert>
              <double>0.5</double>
              <double>0.7</double>
              <double>0.83</double>
              <double>0.9</double>
              <double>0.95</double>
              <double>0.99</double>
              <double>0.99</double>
            </FInert>
            <OCUnits>Total</OCUnits>
          </SoilOrganicMatter>
          <InitialWater>
            <Name>Initial water</Name>
            <PercentMethod>EvenlyDistributed</PercentMethod>
            <FractionFull>0.95</FractionFull>
            <DepthWetSoil>NaN</DepthWetSoil>
          </InitialWater>
          <Sample>
            <Name>Initial nitrogen</Name>
            <Thickness>
              <double>150</double>
              <double>150</double>
              <double>200</double>
              <double>150</double>
              <double>250</double>
              <double>300</double>
              <double>300</double>
            </Thickness>
            <NO3>
              <double>5</double>
              <double>2.5</double>
              <double>1</double>
              <double>0.75</double>
              <double>0.5</double>
              <double>0.5</double>
              <double>0.5</double>
            </NO3>
            <NH4>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
            </NH4>
            <NO3Units>ppm</NO3Units>
            <NH4Units>ppm</NH4Units>
            <SWUnits>Volumetric</SWUnits>
            <OCUnits>Total</OCUnits>
            <PHUnits>Water</PHUnits>
          </Sample>
          <CERESSoilTemperature>
            <Name>CERESSoilTemperature</Name>
          </CERESSoilTemperature>
          <RecordNumber>0</RecordNumber>
          <SoilType>NZ_Sedimentary</SoilType>
          <LocalName>Lismore</LocalName>
          <Site>Winchmore</Site>
          <NearestTown>Ashburton</NearestTown>
          <Region>Canterbury</Region>
          <Country>New Zealand</Country>
          <NaturalVegetation />
          <Latitude>-48.48</Latitude>
          <Longitude>0</Longitude>
        </Soil>
        <Report>
          <Name>Results</Name>
          <ExperimentFactorNames />
          <ExperimentFactorValues />
          <VariableNames>
            <string>[Clock].Today as Date</string>
            <string>[Slurp].Leaf.Wt</string>
            <string>[Slurp].Leaf.LAI</string>
            <string>[Slurp].Leaf.Photosynthesis</string>
            <string>[Slurp].Root.NTakenUp</string>
            <string>sum([LismoreSoil].NO3N)</string>
          </VariableNames>
          <EventNames>
            <string>[Clock].EndOfDay</string>
          </EventNames>
        </Report>
        <Plant>
          <Name>Slurp</Name>
          <ResourceName>Slurp</ResourceName>
          <CropType>Slurp</CropType>
          <SowingDate>0001-01-01T00:00:00</SowingDate>
        </Plant>
        <Area>1</Area>
        <Slope>0</Slope>
      </Zone>
      <Folder>
        <Name>Harvest</Name>
        <Graph>
          <Name>Harvestable</Name>
          <Series>
            <Name>Ryegrass</Name>
            <Type>Scatter</Type>
            <XAxis>Bottom</XAxis>
            <YAxis>Left</YAxis>
            <ColourArgb>-16736653</ColourArgb>
            <FactorIndexToVaryColours>-1</FactorIndexToVaryColours>
            <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
            <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
            <Marker>None</Marker>
            <MarkerSize>Normal</MarkerSize>
            <Line>Solid</Line>
            <LineThickness>Normal</LineThickness>
            <TableName>Results</TableName>
            <XFieldName>Date</XFieldName>
            <YFieldName>Slurp.Leaf.Wt</YFieldName>
            <ShowInLegend>true</ShowInLegend>
            <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
            <Cumulative>false</Cumulative>
            <CumulativeX>false</CumulativeX>
          </Series>
          <Axis>
            <Type>Left</Type>
            <Title>DM (kg/ha)</Title>
            <Inverted>false</Inverted>
            <Minimum>NaN</Minimum>
            <Maximum>NaN</Maximum>
            <Interval>NaN</Interval>
          </Axis>
          <Axis>
            <Type>Bottom</Type>
            <Inverted>false</Inverted>
            <Minimum>NaN</Minimum>
            <Maximum>NaN</Maximum>
            <Interval>NaN</Interval>
          </Axis>
          <LegendPosition>TopRight</LegendPosition>
          <DisabledSeries />
          <IncludeInDocumentation>false</IncludeInDocumentation>
        </Graph>
        <Graph>
          <Name>Yield</Name>
          <Series>
            <Name>Ryegrass</Name>
            <Type>Scatter</Type>
            <XAxis>Bottom</XAxis>
            <YAxis>Right</YAxis>
            <ColourArgb>-16736653</ColourArgb>
            <FactorIndexToVaryColours>-1</FactorIndexToVaryColours>
            <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
            <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
            <Marker>None</Marker>
            <MarkerSize>Normal</MarkerSize>
            <Line>Solid</Line>
            <LineThickness>Normal</LineThickness>
            <TableName>Results</TableName>
            <XFieldName>Date</XFieldName>
            <YFieldName>Ryegrass.HarvestedWt</YFieldName>
            <ShowInLegend>true</ShowInLegend>
            <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
            <Cumulative>true</Cumulative>
            <CumulativeX>false</CumulativeX>
          </Series>
          <Series>
            <Name>WhiteClover</Name>
            <Type>Scatter</Type>
            <XAxis>Bottom</XAxis>
            <YAxis>Right</YAxis>
            <ColourArgb>-1663232</ColourArgb>
            <FactorIndexToVaryColours>-1</FactorIndexToVaryColours>
            <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
            <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
            <Marker>None</Marker>
            <MarkerSize>Normal</MarkerSize>
            <Line>Solid</Line>
            <LineThickness>Normal</LineThickness>
            <TableName>Results</TableName>
            <XFieldName>Date</XFieldName>
            <YFieldName>WhiteClover.HarvestedWt</YFieldName>
            <ShowInLegend>true</ShowInLegend>
            <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
            <Cumulative>true</Cumulative>
            <CumulativeX>false</CumulativeX>
          </Series>
          <Axis>
            <Type>Bottom</Type>
            <Inverted>false</Inverted>
            <Minimum>NaN</Minimum>
            <Maximum>NaN</Maximum>
            <Interval>NaN</Interval>
          </Axis>
          <Axis>
            <Type>Right</Type>
            <Inverted>false</Inverted>
            <Minimum>NaN</Minimum>
            <Maximum>NaN</Maximum>
            <Interval>NaN</Interval>
          </Axis>
          <LegendPosition>TopRight</LegendPosition>
          <DisabledSeries />
          <IncludeInDocumentation>false</IncludeInDocumentation>
        </Graph>
      </Folder>
    </Simulation>
    <Simulation>
      <Name>Slurp5</Name>
      <Clock>
        <Name>Clock</Name>
        <StartDate>1980-07-01T00:00:00</StartDate>
        <EndDate>1981-06-30T00:00:00</EndDate>
      </Clock>
      <Weather>
        <Name>Weather</Name>
        <FileName>%root%\Examples\WeatherFiles\lincoln.met</FileName>
        <ExcelWorkSheetName />
      </Weather>
      <Summary>
        <Name>Summary</Name>
      </Summary>
      <SoilArbitrator>
        <Name>SoilArbitrator</Name>
      </SoilArbitrator>
      <Zone>
        <Name>Field</Name>
        <Folder>
          <Name>Managers</Name>
          <Manager>
            <Name>AutomaticFertiliser</Name>
            <Script>
              <AllowFertiliser>yes</AllowFertiliser>
              <Depth2SoilN>500</Depth2SoilN>
              <CriticalSoilN>20</CriticalSoilN>
              <FertNAmount>25</FertNAmount>
              <FertType>UreaN</FertType>
              <FertApplicationDepth>1</FertApplicationDepth>
              <FertMinimumDays>1</FertMinimumDays>
            </Script>
            <Code><![CDATA[using System;
using Models.Core;
using Models.PMF;
using Models.Soils;
using APSIM.Shared.Utilities;
using System.Xml.Serialization;

namespace Models
{
	[Serializable]
	public class Script : Model
	{
		[Link] Clock Clock;
		[Link] Fertiliser fertiliser;
		[Link] ISummary summary = null;
		[Link] Soil Soil;

		//User inputs from properties tab
		[Description("Turn ferliser applications on? ")]
		public yesnoType AllowFertiliser { get; set; }
		
		[Description("Depth to calculate available soil N (mm): ")]
		public double Depth2SoilN { get; set; }

		[Description("Minimum available N, triggers an application (kgN/ha): ")]
		public double CriticalSoilN { get; set; }

		[Description("Amount of N fertiliser for each application (kgN/ha): ")]
		public double FertNAmount { get; set; }

		[Description("Type of N fertiliser to apply: ")]
		public Fertiliser.Types FertType { get; set; }

		[Description("Depth at which to apply the fertiliser (mm): ")]
		public double FertApplicationDepth { get; set; }
	   
		[Description("Minimum period between applications (days): ")]
		public double FertMinimumDays { get; set; }
	   
		public enum yesnoType
		{
			/// <summary>a positive answer</summary>
			yes,
			/// <summary>a negative answer</summary>
			no
		}

		[XmlIgnore] public double TopMineralN { get; set; }
		
		private DateTime lastApplicationDate;
		private bool fertiliserIsAllowed;
		private int nLayers;

		[EventSubscribe("StartOfSimulation")]
		private void OnStartOfSimulation(object sender, EventArgs e)
		{
			fertiliserIsAllowed = (AllowFertiliser == yesnoType.yes);
			nLayers = Soil.SoilWater.Thickness.Length;
		}

		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			double daysSinceLastApplication = (Clock.Today - lastApplicationDate).TotalDays;
			
			// get the N stored in the soil
			double depthFromSurface = 0.0;
			double fracLayer = 0.0;
			TopMineralN = 0.0;
			for (int layer = 0; layer < nLayers; layer++)
			{
				fracLayer = Math.Min(1.0, (Depth2SoilN - depthFromSurface) / Soil.SoilWater.Thickness[layer]);
				TopMineralN += (Soil.SoilNitrogen.NO3[layer]
				+ Soil.SoilNitrogen.NH4[layer]
				+ Soil.SoilNitrogen.urea[layer])
				* fracLayer;
				depthFromSurface += Soil.SoilWater.Thickness[layer];
				if (depthFromSurface >= Depth2SoilN)
					layer = nLayers;
			}

			if (fertiliserIsAllowed && (daysSinceLastApplication >= FertMinimumDays) && (TopMineralN <= CriticalSoilN))
			{
				fertiliser.Apply(FertNAmount, FertType, FertApplicationDepth);
				lastApplicationDate = Clock.Today;
			}
		}
	}
}
]]></Code>
          </Manager>
          <Manager>
            <Name>AutomaticIrrigation</Name>
            <Script>
              <allowIrrigation>yes</allowIrrigation>
              <seasonStart>15-Aug</seasonStart>
              <seasonEnd>30-May</seasonEnd>
              <seasonsAllocation>10000</seasonsAllocation>
              <triggerDeficit>75</triggerDeficit>
              <targetDeficit>99</targetDeficit>
              <returndays>1</returndays>
              <maximumAmount>30</maximumAmount>
              <depthPAWC>300</depthPAWC>
            </Script>
            <Code><![CDATA[using System;
using Models.Core;
using Models.PMF;
using Models.Soils;
using System.Xml.Serialization;
using Models.PMF;
using APSIM.Shared.Utilities;

        
namespace Models
{
	[Serializable] 
	[System.Xml.Serialization.XmlInclude(typeof(Model))]
	public class Script : Model
	{
		//Communication to other modules
		[Link] ISummary summary = null;
		[Link] Irrigation Irrigation;
		[Link] Clock Clock;
		[Link] Soil Soil;
		[Link(IsOptional = true)] ICrop existingCrop;
	   
		//User inputs from properties tab
		[Description("Turn irrigation on?")]
		public answerType allowIrrigation { get; set; }
		[Description("Start of irrigation season (dd-MMM)")]
		public string seasonStart { get; set; }
		[Description("End of irrigation season (dd-MMM)")]
		public string seasonEnd { get; set; }
		[Description("Season allocation (mm)")]
		public double seasonsAllocation { get; set; }
		[Description("Deficit to trigger irrigation (% PAWC)")]
		public double triggerDeficit { get; set; }
		[Description("Deficit to stop irrigaton (% PAWC)")]
		public double targetDeficit { get; set; }
		[Description("Minimum days for irrigation to return")]
		public double returndays { get; set; }
		[Description("Maximum irrigation application (mm/day)")]
		public double maximumAmount { get; set; }
		[Description("Depth to calculate PAWC (mm)")]
		public double depthPAWC { get; set; }
	   
		public enum answerType
		{
			/// <summary>a positive answer</summary>
			yes,
			/// <summary>a negative answer</summary>
			no
		}

		//Class members
		[XmlIgnore] public double TopSWdeficit { get; set; }
		[XmlIgnore] public double TopSWC { get; set; }
		[XmlIgnore] public double DaysSinceIrrigation { get; set; }
		[XmlIgnore] public double AmountToApply { get; set; }
		[XmlIgnore] public double SeasonAppliedAmount { get; set; }
		
		private bool IrrigationIsAllowed { get; set; }
		private bool SeasonIsOpen { get; set; }
		private bool CropIsActive { get; set; }
		private bool IrrigatorIsAvailable { get; set; }
		private bool SoilIsDry { get; set; }

		private DateTime StartDate;
		private DateTime EndDate;
		private double TopDUL;
		private double TopLL;
		private int nLayers;
	
		//Calculate static soil variables
		[EventSubscribe("StartOfSimulation")]
		private void OnStartOfSimulation(object sender, EventArgs e)
		{   
			//Set the season dates
			StartDate = DateTime.Parse(seasonStart + "-" + Clock.Today.Year.ToString());
			EndDate = DateTime.Parse(seasonEnd + "-" + Clock.Today.Year.ToString());
			
			//Can we irrigate at all?
			IrrigationIsAllowed = false; 
			if (allowIrrigation == answerType.yes)
				IrrigationIsAllowed = true; 

			//Calculate soil water variables
			double depthFromSurface = 0.0;
			double fracLayer = 0.0;
			nLayers = Soil.SoilWater.Thickness.Length;
			for (int layer = 0; layer < nLayers; layer++)
			{
				fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / Soil.SoilWater.Thickness[layer]);
				TopLL += Soil.SoilWater.LL15mm[layer] * fracLayer;
				TopDUL += Soil.SoilWater.DULmm[layer] * fracLayer;
				depthFromSurface += Soil.SoilWater.Thickness[layer];
				if (depthFromSurface >= depthPAWC)
					layer = nLayers;
			}
		}
	   	  
		//Determine daily requirement for irrigation
		[EventSubscribe("StartOfDay")]
		private void OnStartOfDay(object sender, EventArgs e)
		{
			//Can we irrigate today?		  
			SeasonIsOpen = isBetween(Clock.Today, StartDate, EndDate);

			//Is there a crop in the ground that needs irrigation?
			CropIsActive = false;
			if ((existingCrop != null) && (existingCrop.IsAlive))
				CropIsActive = true;
	      
			//Is the irrigator available?
			IrrigatorIsAvailable = false;
			DaysSinceIrrigation += 1;
			if (DaysSinceIrrigation >= returndays)
				IrrigatorIsAvailable = true;
	      
			//Is the soil dry enough to require irrigation?
			SoilIsDry = false;
			double depthFromSurface = 0.0;
			double fracLayer = 0.0;
			TopSWC = 0.0;
			for (int layer = 0; layer < nLayers; layer++)
			//for (int layer = 0; depthFromSurface < depthPAWC + Soil.SoilWater.Thickness[layer]; layer++)
			{
				fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / Soil.SoilWater.Thickness[layer]);
				TopSWC += Soil.SoilWater.SWmm[layer] * fracLayer;
				depthFromSurface += Soil.SoilWater.Thickness[layer];
				if (depthFromSurface >= depthPAWC)
					layer = nLayers;
			}
			
			TopSWdeficit = TopSWC - TopDUL;
			if (Math.Max(0.0, -TopSWdeficit) >= (TopDUL - TopLL) * (100 - triggerDeficit) / 100)
				SoilIsDry = true;
	            
			//Are all the conditions ratifying irrigation
			if (IrrigationIsAllowed && SeasonIsOpen && CropIsActive && IrrigatorIsAvailable && SoilIsDry)
			{
				//Lets bloody well irrigate then!!!!
				AmountToApply = TopDUL * targetDeficit / 100 - TopSWC;
				AmountToApply = Math.Max(0.0, Math.Min(AmountToApply, seasonsAllocation - SeasonAppliedAmount));
				Irrigation.Apply(AmountToApply);
				DaysSinceIrrigation = 0;
				SeasonAppliedAmount += AmountToApply;
			}
		}
		
		///Checks whether theDate is between iniDate and endDate (non-year specific)
		private bool isBetween(DateTime theDay, DateTime iniDate, DateTime endDate)
		{
			bool result = false;
			if (iniDate.DayOfYear < endDate.DayOfYear)
			{
				// period is within one year, ex: summer in the northern hemisphere
				if ((theDay.DayOfYear >= iniDate.DayOfYear) && (theDay.DayOfYear <= endDate.DayOfYear))
					result = true;
			}
			else
			{
				// period goes over the end of the year, ex: summer in the southern hemisphere
				if ((theDay.DayOfYear >= iniDate.DayOfYear) || (theDay.DayOfYear <= endDate.DayOfYear))
					result = true;
			}
			
			return result;
		}
	}
}
]]></Code>
          </Manager>
          <Manager>
            <Name>SlurpSowingRule</Name>
            <Script>
              <CultivarName>StaticCrop</CultivarName>
              <InitialRootDepth>600</InitialRootDepth>
              <SowingDate>1980-07-01</SowingDate>
            </Script>
            <Code><![CDATA[
using System;
using Models.Core;
using Models.PMF;
using APSIM.Shared.Utilities;
        
namespace Models
{
	[Serializable] 
	[System.Xml.Serialization.XmlInclude(typeof(Model))]
	public class Script : Model
	{
		[Link] Plant Slurp;
		[Link] Clock Clock;

		[Description("Cultivar")]
		public string CultivarName { get; set; }
		[Description("Initial Root Depth")]
		public double InitialRootDepth { get; set; }
		[Description("Sowing Date")]
		public DateTime SowingDate { get; set; }

               
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == SowingDate)
				Slurp.Sow(cultivar: CultivarName, population: 1, depth: InitialRootDepth, rowSpacing: 150);
			//Potato.Sow(... Contains the following arguements:
			//Population  double  Optional  Seeds sowing/m2.  Default is zero
			//Cultivar    string  Required  "NameOfCultivar"
			//Depth       double  Optional  Depth (mm) seed sown.   Default is 100mm 
			//MaxCover    double  Optional  Proportion (0-1) of the ground row crop will cover.   Default is 1.0
			//BudNumber   double  Optional  Number of mainstems per seed sown.  Default is 1.0
			//RowSpacing  double  Optional  Spaceing (mm) between drill rows when crop is sown.  Default is 150mm
			//CropClass   string  Optional  Crop class to instantiate when crop is sown.  Default is "Plant"
		}
	}
}
				]]></Code>
          </Manager>
          <Manager>
            <Name>ResetProduction</Name>
            <Script>
              <OverRidePath>Slurp.Leaf.Photosynthesis.FixedValue</OverRidePath>
              <OverRideInteger>5</OverRideInteger>
              <ChangeDate>1980-07-01</ChangeDate>
            </Script>
            <Code><![CDATA[using System;
using Models.Core;
using System.Collections.Generic;
using System.Text;
using Models.PMF;
using Models;
using System.Xml.Serialization;
using APSIM.Shared.Utilities;

namespace Models
{
	[Serializable] 
	public class Script : Model
	{
		[Link] Plant Plant;
		[Link] Clock Clock;
		[Link] Zone zone;
		
		[Description("Path for coefficient to be Overwritten")]
		public string OverRidePath { get; set; }
		[Description("Value for new coefficient Integer")]
		public int OverRideInteger { get; set; }
		[Description("Sowing Date")]
		public DateTime ChangeDate { get; set; }
        
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == ChangeDate)
			{
				object ResetValue = OverRideInteger;
				zone.Set(OverRidePath, ResetValue);
			}
		}
	}
}
	   ]]></Code>
          </Manager>
          <Manager>
            <Name>ResetLAI</Name>
            <Script>
              <OverRidePath>Slurp.Leaf.LAIFunction.FixedValue</OverRidePath>
              <OverRideInterger>5</OverRideInterger>
              <ChangeDate>1980-07-01</ChangeDate>
            </Script>
            <Code><![CDATA[using System;
using Models.Core;
using System.Collections.Generic;
using System.Text;
using Models.PMF;
using Models;
using System.Xml.Serialization;
using APSIM.Shared.Utilities;

namespace Models
{
	[Serializable] 
	public class Script : Model
	{
		[Link] Plant Plant;
		[Link] Clock Clock;
		[Link] Zone zone;
		
		[Description("Path for coefficient to be Overwritten")]
		public string OverRidePath { get; set; }
		[Description("Value for new coefficient Interger")]
		public int OverRideInterger { get; set; }
		[Description("Sowing Date")]
		public DateTime ChangeDate { get; set; }
        
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == ChangeDate)
			{
				object ResetValue = OverRideInterger;
				zone.Set(OverRidePath, ResetValue);
			}
		}
	}
}
	   ]]></Code>
          </Manager>
        </Folder>
        <MicroClimate>
          <Name>MicroClimate</Name>
          <a_interception>0</a_interception>
          <b_interception>0</b_interception>
          <c_interception>0</c_interception>
          <d_interception>0</d_interception>
          <soil_albedo>0.23</soil_albedo>
          <sun_angle>15</sun_angle>
          <soil_heat_flux_fraction>0.4</soil_heat_flux_fraction>
          <night_interception_fraction>0.5</night_interception_fraction>
          <refheight>2</refheight>
          <albedo>0.29366217672824863</albedo>
          <emissivity>0.96</emissivity>
          <RadIntTotal>0</RadIntTotal>
        </MicroClimate>
        <Irrigation>
          <Name>Irrigation</Name>
        </Irrigation>
        <Fertiliser>
          <Name>Fertiliser</Name>
        </Fertiliser>
        <SurfaceOrganicMatter>
          <Name>SurfaceOrganicMatter</Name>
          <ReportAdditions>no</ReportAdditions>
          <ReportRemovals>no</ReportRemovals>
          <ResidueTypes>
            <Name>ResidueTypes</Name>
            <LoadFromResource>ResidueTypes</LoadFromResource>
          </ResidueTypes>
          <TillageTypes>
            <Name>TillageTypesList</Name>
            <TillageType />
          </TillageTypes>
          <Pools>
            <Pool>
              <PoolName>Sward</PoolName>
              <ResidueType>grass</ResidueType>
              <Mass>1000</Mass>
              <CNRatio>15</CNRatio>
              <CPRatio>NaN</CPRatio>
              <StandingFraction>0</StandingFraction>
            </Pool>
          </Pools>
          <PoolName>Sward</PoolName>
          <type>grass</type>
          <mass>1000</mass>
          <standing_fraction>0</standing_fraction>
          <cpr />
          <cnr>15</cnr>
          <CriticalResidueWeight>2000</CriticalResidueWeight>
          <OptimumDecompTemp>20</OptimumDecompTemp>
          <MaxCumulativeEOS>20</MaxCumulativeEOS>
          <CNRatioDecompCoeff>0.277</CNRatioDecompCoeff>
          <CNRatioDecompThreshold>25</CNRatioDecompThreshold>
          <TotalLeachRain>25</TotalLeachRain>
          <MinRainToLeach>10</MinRainToLeach>
          <CriticalMinimumOrganicC>0.004</CriticalMinimumOrganicC>
          <DefaultCPRatio>0</DefaultCPRatio>
          <DefaultStandingFraction>0</DefaultStandingFraction>
          <StandingExtinctCoeff>0.5</StandingExtinctCoeff>
          <FractionFaecesAdded>0.5</FractionFaecesAdded>
        </SurfaceOrganicMatter>
        <SoluteManager>
          <Name>SoluteManager</Name>
        </SoluteManager>
        <Soil>
          <Name>LismoreSoil</Name>
          <Analysis>
            <Name>Analysis</Name>
            <Thickness>
              <double>150</double>
              <double>150</double>
              <double>200</double>
              <double>150</double>
              <double>250</double>
              <double>300</double>
              <double>300</double>
            </Thickness>
            <Rocks>
              <double>0</double>
              <double>0</double>
              <double>10</double>
              <double>40</double>
              <double>60</double>
              <double>70</double>
              <double>70</double>
            </Rocks>
            <Texture />
            <MunsellColour />
            <PH>
              <double>6</double>
              <double>6</double>
              <double>6</double>
              <double>6</double>
              <double>6</double>
              <double>6</double>
              <double>6</double>
            </PH>
            <CEC>
              <double>12.5</double>
              <double>10</double>
              <double>9</double>
              <double>5</double>
              <double>4</double>
              <double>4</double>
              <double>4</double>
            </CEC>
            <ParticleSizeSand>
              <double>15</double>
              <double>20</double>
              <double>25</double>
              <double>35</double>
              <double>40</double>
              <double>40</double>
              <double>40</double>
            </ParticleSizeSand>
            <ParticleSizeSilt>
              <double>65</double>
              <double>65</double>
              <double>63</double>
              <double>57</double>
              <double>54</double>
              <double>55</double>
              <double>55</double>
            </ParticleSizeSilt>
            <ParticleSizeClay>
              <double>20</double>
              <double>15</double>
              <double>12</double>
              <double>8</double>
              <double>6</double>
              <double>5</double>
              <double>5</double>
            </ParticleSizeClay>
            <PHUnits>Water</PHUnits>
            <BoronUnits>HotWater</BoronUnits>
          </Analysis>
          <Water>
            <Name>Water</Name>
            <SoilCrop>
              <Name>SwardSoil</Name>
              <LL>
                <double>0.15</double>
                <double>0.14</double>
                <double>0.06</double>
                <double>0.02</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0.01</double>
              </LL>
              <KL>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.08</double>
                <double>0.04</double>
                <double>0.01</double>
                <double>0</double>
                <double>0</double>
              </KL>
              <XF>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>0</double>
                <double>0</double>
              </XF>
            </SoilCrop>
            <SoilCrop>
              <Name>RyegrassSoil</Name>
              <LL>
                <double>0.15</double>
                <double>0.14</double>
                <double>0.06</double>
                <double>0.02</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0.01</double>
              </LL>
              <KL>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.08</double>
                <double>0.04</double>
                <double>0.01</double>
                <double>0</double>
                <double>0</double>
              </KL>
              <XF>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>0</double>
                <double>0</double>
              </XF>
            </SoilCrop>
            <SoilCrop>
              <Name>WhiteCloverSoil</Name>
              <LL>
                <double>0.15</double>
                <double>0.14</double>
                <double>0.06</double>
                <double>0.02</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0.01</double>
              </LL>
              <KL>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.08</double>
                <double>0.04</double>
                <double>0.01</double>
                <double>0</double>
                <double>0</double>
              </KL>
              <XF>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>0</double>
                <double>0</double>
              </XF>
            </SoilCrop>
            <SoilCrop>
              <Name>SlurpSoil</Name>
              <LL>
                <double>0.15</double>
                <double>0.14</double>
                <double>0.06</double>
                <double>0.02</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0.01</double>
              </LL>
              <KL>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.08</double>
                <double>0.04</double>
                <double>0.01</double>
                <double>0</double>
                <double>0</double>
              </KL>
              <XF>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>1</double>
                <double>0</double>
                <double>0</double>
              </XF>
            </SoilCrop>
            <Thickness>
              <double>150</double>
              <double>150</double>
              <double>200</double>
              <double>150</double>
              <double>250</double>
              <double>300</double>
              <double>300</double>
            </Thickness>
            <BD>
              <double>1.3</double>
              <double>1.35</double>
              <double>1</double>
              <double>0.53</double>
              <double>0.31</double>
              <double>0.3</double>
              <double>0.3</double>
            </BD>
            <AirDry>
              <double>0.05</double>
              <double>0.12</double>
              <double>0.055</double>
              <double>0.015</double>
              <double>0.01</double>
              <double>0.01</double>
              <double>0.01</double>
            </AirDry>
            <LL15>
              <double>0.15</double>
              <double>0.14</double>
              <double>0.055</double>
              <double>0.015</double>
              <double>0.01</double>
              <double>0.01</double>
              <double>0.01</double>
            </LL15>
            <DUL>
              <double>0.36</double>
              <double>0.34</double>
              <double>0.19</double>
              <double>0.065</double>
              <double>0.04</double>
              <double>0.03</double>
              <double>0.03</double>
            </DUL>
            <SAT>
              <double>0.45</double>
              <double>0.43</double>
              <double>0.25</double>
              <double>0.15</double>
              <double>0.11</double>
              <double>0.11</double>
              <double>0.11</double>
            </SAT>
            <KS>
              <double>5000</double>
              <double>2500</double>
              <double>3000</double>
              <double>10000</double>
              <double>17500</double>
              <double>20000</double>
              <double>20000</double>
            </KS>
          </Water>
          <SoilWater>
            <Name>SoilWater</Name>
            <SummerDate>1-Nov</SummerDate>
            <SummerU>6</SummerU>
            <SummerCona>3.5</SummerCona>
            <WinterDate>1-apr</WinterDate>
            <WinterU>2</WinterU>
            <WinterCona>2</WinterCona>
            <DiffusConst>88</DiffusConst>
            <DiffusSlope>35</DiffusSlope>
            <Salb>0.13</Salb>
            <CN2Bare>73</CN2Bare>
            <CNRed>20</CNRed>
            <CNCov>0.8</CNCov>
            <slope>0</slope>
            <discharge_width>0</discharge_width>
            <catchment_area>0</catchment_area>
            <max_pond>0</max_pond>
            <Thickness>
              <double>150</double>
              <double>150</double>
              <double>200</double>
              <double>150</double>
              <double>250</double>
              <double>300</double>
              <double>300</double>
            </Thickness>
            <SWCON>
              <double>0.5</double>
              <double>0.52</double>
              <double>0.55</double>
              <double>0.6</double>
              <double>0.65</double>
              <double>0.65</double>
              <double>0.65</double>
            </SWCON>
            <KLAT>
              <double>0</double>
              <double>0</double>
              <double>0</double>
              <double>0</double>
              <double>0</double>
              <double>0</double>
              <double>0</double>
            </KLAT>
            <residueinterception>0</residueinterception>
          </SoilWater>
          <SoilNitrogen>
            <Name>SoilNitrogen</Name>
            <fom_type>
              <string>default</string>
              <string>manure</string>
              <string>mucuna</string>
              <string>lablab</string>
              <string>shemp</string>
              <string>stable</string>
            </fom_type>
            <fract_carb>
              <double>0.2</double>
              <double>0.3</double>
              <double>0.54</double>
              <double>0.57</double>
              <double>0.45</double>
              <double>0</double>
            </fract_carb>
            <fract_cell>
              <double>0.7</double>
              <double>0.3</double>
              <double>0.37</double>
              <double>0.37</double>
              <double>0.47</double>
              <double>0.1</double>
            </fract_cell>
            <fract_lign>
              <double>0.1</double>
              <double>0.4</double>
              <double>0.09</double>
              <double>0.06</double>
              <double>0.08</double>
              <double>0.9</double>
            </fract_lign>
            <wfpsN2N2O_x>
              <double>22</double>
              <double>88</double>
            </wfpsN2N2O_x>
            <wfpsN2N2O_y>
              <double>0.1</double>
              <double>1</double>
            </wfpsN2N2O_y>
            <oc>
              <double>3.7136764881329496</double>
              <double>2.4698281813043792</double>
              <double>1.2383961716086014</double>
              <double>0.49836009167083023</double>
              <double>0.25025052330473485</double>
              <double>0.15035274660681502</double>
              <double>0.10019396267774858</double>
            </oc>
          </SoilNitrogen>
          <SoilOrganicMatter>
            <Name>SoilOrganicMatter</Name>
            <RootCN>40</RootCN>
            <RootWt>1000</RootWt>
            <SoilCN>12</SoilCN>
            <EnrACoeff>7.4</EnrACoeff>
            <EnrBCoeff>0.2</EnrBCoeff>
            <Thickness>
              <double>150</double>
              <double>150</double>
              <double>200</double>
              <double>150</double>
              <double>250</double>
              <double>300</double>
              <double>300</double>
            </Thickness>
            <Depth>
              <string>0-15</string>
              <string>15-30</string>
              <string>30-50</string>
              <string>50-65</string>
              <string>65-90</string>
              <string>90-120</string>
              <string>120-150</string>
            </Depth>
            <OC>
              <double>3</double>
              <double>1</double>
              <double>0.6</double>
              <double>0.4</double>
              <double>0.25</double>
              <double>0.15</double>
              <double>0.1</double>
            </OC>
            <FBiom>
              <double>0.04</double>
              <double>0.02</double>
              <double>0.02</double>
              <double>0.01</double>
              <double>0.01</double>
              <double>0</double>
              <double>0</double>
            </FBiom>
            <FInert>
              <double>0.5</double>
              <double>0.7</double>
              <double>0.83</double>
              <double>0.9</double>
              <double>0.95</double>
              <double>0.99</double>
              <double>0.99</double>
            </FInert>
            <OCUnits>Total</OCUnits>
          </SoilOrganicMatter>
          <InitialWater>
            <Name>Initial water</Name>
            <PercentMethod>EvenlyDistributed</PercentMethod>
            <FractionFull>0.95</FractionFull>
            <DepthWetSoil>NaN</DepthWetSoil>
          </InitialWater>
          <Sample>
            <Name>Initial nitrogen</Name>
            <Thickness>
              <double>150</double>
              <double>150</double>
              <double>200</double>
              <double>150</double>
              <double>250</double>
              <double>300</double>
              <double>300</double>
            </Thickness>
            <NO3>
              <double>5</double>
              <double>2.5</double>
              <double>1</double>
              <double>0.75</double>
              <double>0.5</double>
              <double>0.5</double>
              <double>0.5</double>
            </NO3>
            <NH4>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
              <double>0.1</double>
            </NH4>
            <NO3Units>ppm</NO3Units>
            <NH4Units>ppm</NH4Units>
            <SWUnits>Volumetric</SWUnits>
            <OCUnits>Total</OCUnits>
            <PHUnits>Water</PHUnits>
          </Sample>
          <CERESSoilTemperature>
            <Name>CERESSoilTemperature</Name>
          </CERESSoilTemperature>
          <RecordNumber>0</RecordNumber>
          <SoilType>NZ_Sedimentary</SoilType>
          <LocalName>Lismore</LocalName>
          <Site>Winchmore</Site>
          <NearestTown>Ashburton</NearestTown>
          <Region>Canterbury</Region>
          <Country>New Zealand</Country>
          <NaturalVegetation />
          <Latitude>-48.48</Latitude>
          <Longitude>0</Longitude>
        </Soil>
        <Report>
          <Name>Results</Name>
          <ExperimentFactorNames />
          <ExperimentFactorValues />
          <VariableNames>
            <string>[Clock].Today as Date</string>
            <string>[Slurp].Leaf.Wt</string>
            <string>[Slurp].Leaf.LAI</string>
            <string>[Slurp].Leaf.Photosynthesis</string>
            <string>[Slurp].Root.NTakenUp</string>
            <string>sum([LismoreSoil].NO3N)</string>
          </VariableNames>
          <EventNames>
            <string>[Clock].EndOfDay</string>
          </EventNames>
        </Report>
        <Plant>
          <Name>Slurp</Name>
          <ResourceName>Slurp</ResourceName>
          <CropType>Slurp</CropType>
          <SowingDate>0001-01-01T00:00:00</SowingDate>
        </Plant>
        <Area>1</Area>
        <Slope>0</Slope>
      </Zone>
      <Folder>
        <Name>Harvest</Name>
        <Graph>
          <Name>Harvestable</Name>
          <Series>
            <Name>Ryegrass</Name>
            <Type>Scatter</Type>
            <XAxis>Bottom</XAxis>
            <YAxis>Left</YAxis>
            <ColourArgb>-16736653</ColourArgb>
            <FactorIndexToVaryColours>-1</FactorIndexToVaryColours>
            <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
            <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
            <Marker>None</Marker>
            <MarkerSize>Normal</MarkerSize>
            <Line>Solid</Line>
            <LineThickness>Normal</LineThickness>
            <TableName>Results</TableName>
            <XFieldName>Date</XFieldName>
            <YFieldName>Slurp.Leaf.Wt</YFieldName>
            <ShowInLegend>true</ShowInLegend>
            <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
            <Cumulative>false</Cumulative>
            <CumulativeX>false</CumulativeX>
          </Series>
          <Axis>
            <Type>Left</Type>
            <Title>DM (kg/ha)</Title>
            <Inverted>false</Inverted>
            <Minimum>NaN</Minimum>
            <Maximum>NaN</Maximum>
            <Interval>NaN</Interval>
          </Axis>
          <Axis>
            <Type>Bottom</Type>
            <Inverted>false</Inverted>
            <Minimum>NaN</Minimum>
            <Maximum>NaN</Maximum>
            <Interval>NaN</Interval>
          </Axis>
          <LegendPosition>TopRight</LegendPosition>
          <DisabledSeries />
          <IncludeInDocumentation>false</IncludeInDocumentation>
        </Graph>
        <Graph>
          <Name>Yield</Name>
          <Series>
            <Name>Ryegrass</Name>
            <Type>Scatter</Type>
            <XAxis>Bottom</XAxis>
            <YAxis>Right</YAxis>
            <ColourArgb>-16736653</ColourArgb>
            <FactorIndexToVaryColours>-1</FactorIndexToVaryColours>
            <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
            <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
            <Marker>None</Marker>
            <MarkerSize>Normal</MarkerSize>
            <Line>Solid</Line>
            <LineThickness>Normal</LineThickness>
            <TableName>Results</TableName>
            <XFieldName>Date</XFieldName>
            <YFieldName>Ryegrass.HarvestedWt</YFieldName>
            <ShowInLegend>true</ShowInLegend>
            <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
            <Cumulative>true</Cumulative>
            <CumulativeX>false</CumulativeX>
          </Series>
          <Series>
            <Name>WhiteClover</Name>
            <Type>Scatter</Type>
            <XAxis>Bottom</XAxis>
            <YAxis>Right</YAxis>
            <ColourArgb>-1663232</ColourArgb>
            <FactorIndexToVaryColours>-1</FactorIndexToVaryColours>
            <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
            <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
            <Marker>None</Marker>
            <MarkerSize>Normal</MarkerSize>
            <Line>Solid</Line>
            <LineThickness>Normal</LineThickness>
            <TableName>Results</TableName>
            <XFieldName>Date</XFieldName>
            <YFieldName>WhiteClover.HarvestedWt</YFieldName>
            <ShowInLegend>true</ShowInLegend>
            <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
            <Cumulative>true</Cumulative>
            <CumulativeX>false</CumulativeX>
          </Series>
          <Axis>
            <Type>Bottom</Type>
            <Inverted>false</Inverted>
            <Minimum>NaN</Minimum>
            <Maximum>NaN</Maximum>
            <Interval>NaN</Interval>
          </Axis>
          <Axis>
            <Type>Right</Type>
            <Inverted>false</Inverted>
            <Minimum>NaN</Minimum>
            <Maximum>NaN</Maximum>
            <Interval>NaN</Interval>
          </Axis>
          <LegendPosition>TopRight</LegendPosition>
          <DisabledSeries />
          <IncludeInDocumentation>false</IncludeInDocumentation>
        </Graph>
      </Folder>
    </Simulation>
    <Graph>
      <Name>Photosyn</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>0</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>Slurp.Leaf.Photosynthesis</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title>DM (kg/ha)</Title>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Graph>
      <Name>SoilN</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>0</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>sum(LismoreSoil.NO3N)</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title>DM (kg/ha)</Title>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Graph>
      <Name>DM</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>0</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>Slurp.Leaf.Wt</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title>DM (kg/ha)</Title>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Graph>
      <Name>NUptake</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>0</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>Slurp.Root.NTakenUp</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title>DM (kg/ha)</Title>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Manager>
      <Name>SowingRule</Name>
      <Script>
        <StartDate>1-jul</StartDate>
        <EndDate>1-jul</EndDate>
        <MinESW>5</MinESW>
        <MinRain>5</MinRain>
        <RainDays>5</RainDays>
        <CultivarName>Slurp</CultivarName>
        <SowingDepth>30</SowingDepth>
        <RowSpacing>250</RowSpacing>
        <Population>120</Population>
      </Script>
      <Code><![CDATA[using System;
using Models.Core;
using Models.PMF.OldPlant;
using Models.Soils;
using Models.Utilities;
using APSIM.Shared.Utilities;

namespace Models
{
	[Serializable]
	public class Script : Model
	{
		[Link] Clock Clock;
		[Link] Fertiliser Fertiliser;
		[Link] Summary Summary;
		[Link] Plant15 Wheat;
		[Link] Soil Soil;
		Accumulator accumulatedRain;
		
		[Description("Start of sowing window (d-mmm)")]
		public string StartDate { get; set; }
		[Description("End of sowing window (d-mmm)")]
		public string EndDate { get; set; }
		[Description("Minimum extractable soil water for sowing (mm)")]
		public double MinESW { get; set; }
		[Description("Accumulated rainfall required for sowing (mm)")]
		public double MinRain { get; set; }
		[Description("Duration of rainfall accumulation (d)")]
		public int RainDays { get; set; }
		[Description("Cultivar to be sown")]
		public string CultivarName { get; set; }
		[Description("Sowing depth (mm)")]
		public double SowingDepth { get; set; }
		[Description("Row spacing (mm)")]
		public double RowSpacing { get; set; }
		[Description("Plant population (/m2)")]
		public double Population { get; set; }
		
		
		[EventSubscribe("Commencing")]
		private void OnSimulationCommencing(object sender, EventArgs e)
		{
			accumulatedRain = new Accumulator(this, "[Weather].Rain", RainDays);
		}
		

		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			accumulatedRain.Update();
			
			if (DateUtilities.WithinDates(StartDate, Clock.Today, EndDate) &&
			    Wheat.plant_status == "out" &&
			    Soil.SoilWater.ESW > MinESW &&
			    accumulatedRain.Sum > MinRain)
			{
				Wheat.Sow(population: Population, cultivar: CultivarName, depth: SowingDepth, rowSpacing: RowSpacing);	
			}
		
		}
		
	}
}
]]></Code>
    </Manager>
  </Folder>
  <Folder>
    <Name>SlurpRpl</Name>
    <Graph>
      <Name>Photosyn</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>0</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>Slurp.Leaf.Photosynthesis</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Graph>
      <Name>SoilN</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>0</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>sum(LismoreSoil.NO3N)</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Graph>
      <Name>DM</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>0</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>Slurp.Leaf.Wt</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Graph>
      <Name>NUptake</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>0</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>Slurp.Root.NTakenUp</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Graph>
      <Name>NUptakeMax</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>0</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>Slurp.Root.MaxDailyNUptake</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Experiment>
      <Name>Experiment</Name>
      <Factors>
        <Name>Factors</Name>
        <Factor>
          <Name>Factor</Name>
          <Specifications>
            <string>[ResetProduction].Script.OverRideInteger=1,2,3,5</string>
          </Specifications>
        </Factor>
      </Factors>
      <Simulation>
        <Name>Slurp</Name>
        <Clock>
          <Name>Clock</Name>
          <StartDate>1980-07-01T00:00:00</StartDate>
          <EndDate>1981-06-30T00:00:00</EndDate>
        </Clock>
        <Weather>
          <Name>Weather</Name>
          <FileName>%root%\Examples\WeatherFiles\lincoln.met</FileName>
          <ExcelWorkSheetName />
        </Weather>
        <Summary>
          <Name>Summary</Name>
        </Summary>
        <SoilArbitrator>
          <Name>SoilArbitrator</Name>
        </SoilArbitrator>
        <Zone>
          <Name>Field</Name>
          <Folder>
            <Name>Managers</Name>
            <Manager>
              <Name>AutomaticFertiliser</Name>
              <Script>
                <AllowFertiliser>no</AllowFertiliser>
                <Depth2SoilN>500</Depth2SoilN>
                <CriticalSoilN>200</CriticalSoilN>
                <FertNAmount>100</FertNAmount>
                <FertType>UreaN</FertType>
                <FertApplicationDepth>1</FertApplicationDepth>
                <FertMinimumDays>1</FertMinimumDays>
              </Script>
              <Code><![CDATA[using System;
using Models.Core;
using Models.PMF;
using Models.Soils;
using APSIM.Shared.Utilities;
using System.Xml.Serialization;

namespace Models
{
	[Serializable]
	public class Script : Model
	{
		[Link] Clock Clock;
		[Link] Fertiliser fertiliser;
		[Link] ISummary summary = null;
		[Link] Soil Soil;

		//User inputs from properties tab
		[Description("Turn ferliser applications on? ")]
		public yesnoType AllowFertiliser { get; set; }
		
		[Description("Depth to calculate available soil N (mm): ")]
		public double Depth2SoilN { get; set; }

		[Description("Minimum available N, triggers an application (kgN/ha): ")]
		public double CriticalSoilN { get; set; }

		[Description("Amount of N fertiliser for each application (kgN/ha): ")]
		public double FertNAmount { get; set; }

		[Description("Type of N fertiliser to apply: ")]
		public Fertiliser.Types FertType { get; set; }

		[Description("Depth at which to apply the fertiliser (mm): ")]
		public double FertApplicationDepth { get; set; }
	   
		[Description("Minimum period between applications (days): ")]
		public double FertMinimumDays { get; set; }
	   
		public enum yesnoType
		{
			/// <summary>a positive answer</summary>
			yes,
			/// <summary>a negative answer</summary>
			no
		}

		[XmlIgnore] public double TopMineralN { get; set; }
		
		private DateTime lastApplicationDate;
		private bool fertiliserIsAllowed;
		private int nLayers;

		[EventSubscribe("StartOfSimulation")]
		private void OnStartOfSimulation(object sender, EventArgs e)
		{
			fertiliserIsAllowed = (AllowFertiliser == yesnoType.yes);
			nLayers = Soil.SoilWater.Thickness.Length;
		}

		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			double daysSinceLastApplication = (Clock.Today - lastApplicationDate).TotalDays;
			
			// get the N stored in the soil
			double depthFromSurface = 0.0;
			double fracLayer = 0.0;
			TopMineralN = 0.0;
			for (int layer = 0; layer < nLayers; layer++)
			{
				fracLayer = Math.Min(1.0, (Depth2SoilN - depthFromSurface) / Soil.SoilWater.Thickness[layer]);
				TopMineralN += (Soil.SoilNitrogen.NO3[layer]
				+ Soil.SoilNitrogen.NH4[layer]
				+ Soil.SoilNitrogen.urea[layer])
				* fracLayer;
				depthFromSurface += Soil.SoilWater.Thickness[layer];
				if (depthFromSurface >= Depth2SoilN)
					layer = nLayers;
			}

			if (fertiliserIsAllowed && (daysSinceLastApplication >= FertMinimumDays) && (TopMineralN <= CriticalSoilN))
			{
				fertiliser.Apply(FertNAmount, FertType, FertApplicationDepth);
				lastApplicationDate = Clock.Today;
			}
		}
	}
}
]]></Code>
            </Manager>
            <Manager>
              <Name>AutomaticIrrigation</Name>
              <Script>
                <allowIrrigation>yes</allowIrrigation>
                <seasonStart>15-Aug</seasonStart>
                <seasonEnd>30-May</seasonEnd>
                <seasonsAllocation>10000</seasonsAllocation>
                <triggerDeficit>75</triggerDeficit>
                <targetDeficit>99</targetDeficit>
                <returndays>1</returndays>
                <maximumAmount>30</maximumAmount>
                <depthPAWC>300</depthPAWC>
              </Script>
              <Code><![CDATA[using System;
using Models.Core;
using Models.PMF;
using Models.Soils;
using System.Xml.Serialization;
using Models.PMF;
using APSIM.Shared.Utilities;

        
namespace Models
{
	[Serializable] 
	[System.Xml.Serialization.XmlInclude(typeof(Model))]
	public class Script : Model
	{
		//Communication to other modules
		[Link] ISummary summary = null;
		[Link] Irrigation Irrigation;
		[Link] Clock Clock;
		[Link] Soil Soil;
		[Link(IsOptional = true)] ICrop existingCrop;
	   
		//User inputs from properties tab
		[Description("Turn irrigation on?")]
		public answerType allowIrrigation { get; set; }
		[Description("Start of irrigation season (dd-MMM)")]
		public string seasonStart { get; set; }
		[Description("End of irrigation season (dd-MMM)")]
		public string seasonEnd { get; set; }
		[Description("Season allocation (mm)")]
		public double seasonsAllocation { get; set; }
		[Description("Deficit to trigger irrigation (% PAWC)")]
		public double triggerDeficit { get; set; }
		[Description("Deficit to stop irrigaton (% PAWC)")]
		public double targetDeficit { get; set; }
		[Description("Minimum days for irrigation to return")]
		public double returndays { get; set; }
		[Description("Maximum irrigation application (mm/day)")]
		public double maximumAmount { get; set; }
		[Description("Depth to calculate PAWC (mm)")]
		public double depthPAWC { get; set; }
	   
		public enum answerType
		{
			/// <summary>a positive answer</summary>
			yes,
			/// <summary>a negative answer</summary>
			no
		}

		//Class members
		[XmlIgnore] public double TopSWdeficit { get; set; }
		[XmlIgnore] public double TopSWC { get; set; }
		[XmlIgnore] public double DaysSinceIrrigation { get; set; }
		[XmlIgnore] public double AmountToApply { get; set; }
		[XmlIgnore] public double SeasonAppliedAmount { get; set; }
		
		private bool IrrigationIsAllowed { get; set; }
		private bool SeasonIsOpen { get; set; }
		private bool CropIsActive { get; set; }
		private bool IrrigatorIsAvailable { get; set; }
		private bool SoilIsDry { get; set; }

		private DateTime StartDate;
		private DateTime EndDate;
		private double TopDUL;
		private double TopLL;
		private int nLayers;
	
		//Calculate static soil variables
		[EventSubscribe("StartOfSimulation")]
		private void OnStartOfSimulation(object sender, EventArgs e)
		{   
			//Set the season dates
			StartDate = DateTime.Parse(seasonStart + "-" + Clock.Today.Year.ToString());
			EndDate = DateTime.Parse(seasonEnd + "-" + Clock.Today.Year.ToString());
			
			//Can we irrigate at all?
			IrrigationIsAllowed = false; 
			if (allowIrrigation == answerType.yes)
				IrrigationIsAllowed = true; 

			//Calculate soil water variables
			double depthFromSurface = 0.0;
			double fracLayer = 0.0;
			nLayers = Soil.SoilWater.Thickness.Length;
			for (int layer = 0; layer < nLayers; layer++)
			{
				fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / Soil.SoilWater.Thickness[layer]);
				TopLL += Soil.SoilWater.LL15mm[layer] * fracLayer;
				TopDUL += Soil.SoilWater.DULmm[layer] * fracLayer;
				depthFromSurface += Soil.SoilWater.Thickness[layer];
				if (depthFromSurface >= depthPAWC)
					layer = nLayers;
			}
		}
	   	  
		//Determine daily requirement for irrigation
		[EventSubscribe("StartOfDay")]
		private void OnStartOfDay(object sender, EventArgs e)
		{
			//Can we irrigate today?		  
			SeasonIsOpen = isBetween(Clock.Today, StartDate, EndDate);

			//Is there a crop in the ground that needs irrigation?
			CropIsActive = false;
			if ((existingCrop != null) && (existingCrop.IsAlive))
				CropIsActive = true;
	      
			//Is the irrigator available?
			IrrigatorIsAvailable = false;
			DaysSinceIrrigation += 1;
			if (DaysSinceIrrigation >= returndays)
				IrrigatorIsAvailable = true;
	      
			//Is the soil dry enough to require irrigation?
			SoilIsDry = false;
			double depthFromSurface = 0.0;
			double fracLayer = 0.0;
			TopSWC = 0.0;
			for (int layer = 0; layer < nLayers; layer++)
			//for (int layer = 0; depthFromSurface < depthPAWC + Soil.SoilWater.Thickness[layer]; layer++)
			{
				fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / Soil.SoilWater.Thickness[layer]);
				TopSWC += Soil.SoilWater.SWmm[layer] * fracLayer;
				depthFromSurface += Soil.SoilWater.Thickness[layer];
				if (depthFromSurface >= depthPAWC)
					layer = nLayers;
			}
			
			TopSWdeficit = TopSWC - TopDUL;
			if (Math.Max(0.0, -TopSWdeficit) >= (TopDUL - TopLL) * (100 - triggerDeficit) / 100)
				SoilIsDry = true;
	            
			//Are all the conditions ratifying irrigation
			if (IrrigationIsAllowed && SeasonIsOpen && CropIsActive && IrrigatorIsAvailable && SoilIsDry)
			{
				//Lets bloody well irrigate then!!!!
				AmountToApply = TopDUL * targetDeficit / 100 - TopSWC;
				AmountToApply = Math.Max(0.0, Math.Min(AmountToApply, seasonsAllocation - SeasonAppliedAmount));
				Irrigation.Apply(AmountToApply);
				DaysSinceIrrigation = 0;
				SeasonAppliedAmount += AmountToApply;
			}
		}
		
		///Checks whether theDate is between iniDate and endDate (non-year specific)
		private bool isBetween(DateTime theDay, DateTime iniDate, DateTime endDate)
		{
			bool result = false;
			if (iniDate.DayOfYear < endDate.DayOfYear)
			{
				// period is within one year, ex: summer in the northern hemisphere
				if ((theDay.DayOfYear >= iniDate.DayOfYear) && (theDay.DayOfYear <= endDate.DayOfYear))
					result = true;
			}
			else
			{
				// period goes over the end of the year, ex: summer in the southern hemisphere
				if ((theDay.DayOfYear >= iniDate.DayOfYear) || (theDay.DayOfYear <= endDate.DayOfYear))
					result = true;
			}
			
			return result;
		}
	}
}
]]></Code>
            </Manager>
            <Manager>
              <Name>SlurpSowingRule</Name>
              <Script>
                <CultivarName>StaticCrop</CultivarName>
                <InitialRootDepth>600</InitialRootDepth>
                <SowingDate>1980-07-01</SowingDate>
              </Script>
              <Code><![CDATA[
using System;
using Models.Core;
using Models.PMF;
using APSIM.Shared.Utilities;
        
namespace Models
{
	[Serializable] 
	[System.Xml.Serialization.XmlInclude(typeof(Model))]
	public class Script : Model
	{
		[Link] Plant Slurp;
		[Link] Clock Clock;

		[Description("Cultivar")]
		public string CultivarName { get; set; }
		[Description("Initial Root Depth")]
		public double InitialRootDepth { get; set; }
		[Description("Sowing Date")]
		public DateTime SowingDate { get; set; }

               
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == SowingDate)
				Slurp.Sow(cultivar: CultivarName, population: 1, depth: InitialRootDepth, rowSpacing: 150);
			//Potato.Sow(... Contains the following arguements:
			//Population  double  Optional  Seeds sowing/m2.  Default is zero
			//Cultivar    string  Required  "NameOfCultivar"
			//Depth       double  Optional  Depth (mm) seed sown.   Default is 100mm 
			//MaxCover    double  Optional  Proportion (0-1) of the ground row crop will cover.   Default is 1.0
			//BudNumber   double  Optional  Number of mainstems per seed sown.  Default is 1.0
			//RowSpacing  double  Optional  Spaceing (mm) between drill rows when crop is sown.  Default is 150mm
			//CropClass   string  Optional  Crop class to instantiate when crop is sown.  Default is "Plant"
		}
	}
}
				]]></Code>
            </Manager>
            <Manager>
              <Name>ResetProduction</Name>
              <Script>
                <OverRidePath>Slurp.Leaf.Photosynthesis.FixedValue</OverRidePath>
                <OverRideInteger>2</OverRideInteger>
                <ChangeDate>1980-07-01</ChangeDate>
              </Script>
              <Code><![CDATA[using System;
using Models.Core;
using System.Collections.Generic;
using System.Text;
using Models.PMF;
using Models;
using System.Xml.Serialization;
using APSIM.Shared.Utilities;

namespace Models
{
	[Serializable] 
	public class Script : Model
	{
		[Link] Plant Plant;
		[Link] Clock Clock;
		[Link] Zone zone;
		
		[Description("Path for coefficient to be Overwritten")]
		public string OverRidePath { get; set; }
		[Description("Value for new coefficient Integer")]
		public int OverRideInteger { get; set; }
		[Description("Sowing Date")]
		public DateTime ChangeDate { get; set; }
        
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == ChangeDate)
			{
				object ResetValue = OverRideInteger;
				zone.Set(OverRidePath, ResetValue);
			}
		}
	}
}
	   ]]></Code>
            </Manager>
            <Manager>
              <Name>ResetLAI</Name>
              <Script>
                <OverRidePath>Slurp.Leaf.LAIFunction.FixedValue</OverRidePath>
                <OverRideInterger>5</OverRideInterger>
                <ChangeDate>1980-07-01</ChangeDate>
              </Script>
              <Code><![CDATA[using System;
using Models.Core;
using System.Collections.Generic;
using System.Text;
using Models.PMF;
using Models;
using System.Xml.Serialization;
using APSIM.Shared.Utilities;

namespace Models
{
	[Serializable] 
	public class Script : Model
	{
		[Link] Plant Plant;
		[Link] Clock Clock;
		[Link] Zone zone;
		
		[Description("Path for coefficient to be Overwritten")]
		public string OverRidePath { get; set; }
		[Description("Value for new coefficient Interger")]
		public int OverRideInterger { get; set; }
		[Description("Sowing Date")]
		public DateTime ChangeDate { get; set; }
        
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == ChangeDate)
			{
				object ResetValue = OverRideInterger;
				zone.Set(OverRidePath, ResetValue);
			}
		}
	}
}
	   ]]></Code>
            </Manager>
            <Manager>
              <Name>ResetMaxNUptake</Name>
              <Script>
                <OverRidePath>Slurp.Root.MaxDailyNUptake.FixedValue</OverRidePath>
                <OverRideInterger>5</OverRideInterger>
                <ChangeDate>1980-07-01</ChangeDate>
              </Script>
              <Code><![CDATA[using System;
using Models.Core;
using System.Collections.Generic;
using System.Text;
using Models.PMF;
using Models;
using System.Xml.Serialization;
using APSIM.Shared.Utilities;

namespace Models
{
	[Serializable] 
	public class Script : Model
	{
		[Link] Plant Plant;
		[Link] Clock Clock;
		[Link] Zone zone;
		
		[Description("Path for coefficient to be Overwritten")]
		public string OverRidePath { get; set; }
		[Description("Value for new coefficient Interger")]
		public double OverRideInterger { get; set; }
		[Description("Sowing Date")]
		public DateTime ChangeDate { get; set; }
        
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == ChangeDate)
			{
				object ResetValue = OverRideInterger;
				zone.Set(OverRidePath, ResetValue);
			}
		}
	}
}
	   ]]></Code>
            </Manager>
          </Folder>
          <MicroClimate>
            <Name>MicroClimate</Name>
            <a_interception>0</a_interception>
            <b_interception>0</b_interception>
            <c_interception>0</c_interception>
            <d_interception>0</d_interception>
            <soil_albedo>0.23</soil_albedo>
            <sun_angle>15</sun_angle>
            <soil_heat_flux_fraction>0.4</soil_heat_flux_fraction>
            <night_interception_fraction>0.5</night_interception_fraction>
            <refheight>2</refheight>
            <albedo>0.29366217672824863</albedo>
            <emissivity>0.96</emissivity>
            <RadIntTotal>0</RadIntTotal>
          </MicroClimate>
          <Irrigation>
            <Name>Irrigation</Name>
          </Irrigation>
          <Fertiliser>
            <Name>Fertiliser</Name>
          </Fertiliser>
          <SurfaceOrganicMatter>
            <Name>SurfaceOrganicMatter</Name>
            <ReportAdditions>no</ReportAdditions>
            <ReportRemovals>no</ReportRemovals>
            <ResidueTypes>
              <Name>ResidueTypes</Name>
              <LoadFromResource>ResidueTypes</LoadFromResource>
            </ResidueTypes>
            <TillageTypes>
              <Name>TillageTypesList</Name>
              <TillageType />
            </TillageTypes>
            <Pools>
              <Pool>
                <PoolName>Sward</PoolName>
                <ResidueType>grass</ResidueType>
                <Mass>1000</Mass>
                <CNRatio>15</CNRatio>
                <CPRatio>NaN</CPRatio>
                <StandingFraction>0</StandingFraction>
              </Pool>
            </Pools>
            <PoolName>Sward</PoolName>
            <type>grass</type>
            <mass>1000</mass>
            <standing_fraction>0</standing_fraction>
            <cpr />
            <cnr>15</cnr>
            <CriticalResidueWeight>2000</CriticalResidueWeight>
            <OptimumDecompTemp>20</OptimumDecompTemp>
            <MaxCumulativeEOS>20</MaxCumulativeEOS>
            <CNRatioDecompCoeff>0.277</CNRatioDecompCoeff>
            <CNRatioDecompThreshold>25</CNRatioDecompThreshold>
            <TotalLeachRain>25</TotalLeachRain>
            <MinRainToLeach>10</MinRainToLeach>
            <CriticalMinimumOrganicC>0.004</CriticalMinimumOrganicC>
            <DefaultCPRatio>0</DefaultCPRatio>
            <DefaultStandingFraction>0</DefaultStandingFraction>
            <StandingExtinctCoeff>0.5</StandingExtinctCoeff>
            <FractionFaecesAdded>0.5</FractionFaecesAdded>
          </SurfaceOrganicMatter>
          <SoluteManager>
            <Name>SoluteManager</Name>
          </SoluteManager>
          <Soil>
            <Name>LismoreSoil</Name>
            <Analysis>
              <Name>Analysis</Name>
              <Thickness>
                <double>150</double>
                <double>150</double>
                <double>200</double>
                <double>150</double>
                <double>250</double>
                <double>300</double>
                <double>300</double>
              </Thickness>
              <Rocks>
                <double>0</double>
                <double>0</double>
                <double>10</double>
                <double>40</double>
                <double>60</double>
                <double>70</double>
                <double>70</double>
              </Rocks>
              <Texture />
              <MunsellColour />
              <PH>
                <double>6</double>
                <double>6</double>
                <double>6</double>
                <double>6</double>
                <double>6</double>
                <double>6</double>
                <double>6</double>
              </PH>
              <CEC>
                <double>12.5</double>
                <double>10</double>
                <double>9</double>
                <double>5</double>
                <double>4</double>
                <double>4</double>
                <double>4</double>
              </CEC>
              <ParticleSizeSand>
                <double>15</double>
                <double>20</double>
                <double>25</double>
                <double>35</double>
                <double>40</double>
                <double>40</double>
                <double>40</double>
              </ParticleSizeSand>
              <ParticleSizeSilt>
                <double>65</double>
                <double>65</double>
                <double>63</double>
                <double>57</double>
                <double>54</double>
                <double>55</double>
                <double>55</double>
              </ParticleSizeSilt>
              <ParticleSizeClay>
                <double>20</double>
                <double>15</double>
                <double>12</double>
                <double>8</double>
                <double>6</double>
                <double>5</double>
                <double>5</double>
              </ParticleSizeClay>
              <PHUnits>Water</PHUnits>
              <BoronUnits>HotWater</BoronUnits>
            </Analysis>
            <Water>
              <Name>Water</Name>
              <SoilCrop>
                <Name>SwardSoil</Name>
                <LL>
                  <double>0.15</double>
                  <double>0.14</double>
                  <double>0.06</double>
                  <double>0.02</double>
                  <double>0.01</double>
                  <double>0.01</double>
                  <double>0.01</double>
                </LL>
                <KL>
                  <double>0.1</double>
                  <double>0.1</double>
                  <double>0.08</double>
                  <double>0.04</double>
                  <double>0.01</double>
                  <double>0</double>
                  <double>0</double>
                </KL>
                <XF>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>0</double>
                  <double>0</double>
                </XF>
              </SoilCrop>
              <SoilCrop>
                <Name>RyegrassSoil</Name>
                <LL>
                  <double>0.15</double>
                  <double>0.14</double>
                  <double>0.06</double>
                  <double>0.02</double>
                  <double>0.01</double>
                  <double>0.01</double>
                  <double>0.01</double>
                </LL>
                <KL>
                  <double>0.1</double>
                  <double>0.1</double>
                  <double>0.08</double>
                  <double>0.04</double>
                  <double>0.01</double>
                  <double>0</double>
                  <double>0</double>
                </KL>
                <XF>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>0</double>
                  <double>0</double>
                </XF>
              </SoilCrop>
              <SoilCrop>
                <Name>WhiteCloverSoil</Name>
                <LL>
                  <double>0.15</double>
                  <double>0.14</double>
                  <double>0.06</double>
                  <double>0.02</double>
                  <double>0.01</double>
                  <double>0.01</double>
                  <double>0.01</double>
                </LL>
                <KL>
                  <double>0.1</double>
                  <double>0.1</double>
                  <double>0.08</double>
                  <double>0.04</double>
                  <double>0.01</double>
                  <double>0</double>
                  <double>0</double>
                </KL>
                <XF>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>0</double>
                  <double>0</double>
                </XF>
              </SoilCrop>
              <SoilCrop>
                <Name>SlurpSoil</Name>
                <LL>
                  <double>0.15</double>
                  <double>0.14</double>
                  <double>0.06</double>
                  <double>0.02</double>
                  <double>0.01</double>
                  <double>0.01</double>
                  <double>0.01</double>
                </LL>
                <KL>
                  <double>0.1</double>
                  <double>0.1</double>
                  <double>0.08</double>
                  <double>0.04</double>
                  <double>0.01</double>
                  <double>0</double>
                  <double>0</double>
                </KL>
                <XF>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>0</double>
                  <double>0</double>
                </XF>
              </SoilCrop>
              <Thickness>
                <double>150</double>
                <double>150</double>
                <double>200</double>
                <double>150</double>
                <double>250</double>
                <double>300</double>
                <double>300</double>
              </Thickness>
              <BD>
                <double>1.3</double>
                <double>1.35</double>
                <double>1</double>
                <double>0.53</double>
                <double>0.31</double>
                <double>0.3</double>
                <double>0.3</double>
              </BD>
              <AirDry>
                <double>0.05</double>
                <double>0.12</double>
                <double>0.055</double>
                <double>0.015</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0.01</double>
              </AirDry>
              <LL15>
                <double>0.15</double>
                <double>0.14</double>
                <double>0.055</double>
                <double>0.015</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0.01</double>
              </LL15>
              <DUL>
                <double>0.36</double>
                <double>0.34</double>
                <double>0.19</double>
                <double>0.065</double>
                <double>0.04</double>
                <double>0.03</double>
                <double>0.03</double>
              </DUL>
              <SAT>
                <double>0.45</double>
                <double>0.43</double>
                <double>0.25</double>
                <double>0.15</double>
                <double>0.11</double>
                <double>0.11</double>
                <double>0.11</double>
              </SAT>
              <KS>
                <double>5000</double>
                <double>2500</double>
                <double>3000</double>
                <double>10000</double>
                <double>17500</double>
                <double>20000</double>
                <double>20000</double>
              </KS>
            </Water>
            <SoilWater>
              <Name>SoilWater</Name>
              <SummerDate>1-Nov</SummerDate>
              <SummerU>6</SummerU>
              <SummerCona>3.5</SummerCona>
              <WinterDate>1-apr</WinterDate>
              <WinterU>2</WinterU>
              <WinterCona>2</WinterCona>
              <DiffusConst>88</DiffusConst>
              <DiffusSlope>35</DiffusSlope>
              <Salb>0.13</Salb>
              <CN2Bare>73</CN2Bare>
              <CNRed>20</CNRed>
              <CNCov>0.8</CNCov>
              <slope>0</slope>
              <discharge_width>0</discharge_width>
              <catchment_area>0</catchment_area>
              <max_pond>0</max_pond>
              <Thickness>
                <double>150</double>
                <double>150</double>
                <double>200</double>
                <double>150</double>
                <double>250</double>
                <double>300</double>
                <double>300</double>
              </Thickness>
              <SWCON>
                <double>0.5</double>
                <double>0.52</double>
                <double>0.55</double>
                <double>0.6</double>
                <double>0.65</double>
                <double>0.65</double>
                <double>0.65</double>
              </SWCON>
              <KLAT>
                <double>0</double>
                <double>0</double>
                <double>0</double>
                <double>0</double>
                <double>0</double>
                <double>0</double>
                <double>0</double>
              </KLAT>
              <residueinterception>0</residueinterception>
            </SoilWater>
            <SoilNitrogen>
              <Name>SoilNitrogen</Name>
              <fom_type>
                <string>default</string>
                <string>manure</string>
                <string>mucuna</string>
                <string>lablab</string>
                <string>shemp</string>
                <string>stable</string>
              </fom_type>
              <fract_carb>
                <double>0.2</double>
                <double>0.3</double>
                <double>0.54</double>
                <double>0.57</double>
                <double>0.45</double>
                <double>0</double>
              </fract_carb>
              <fract_cell>
                <double>0.7</double>
                <double>0.3</double>
                <double>0.37</double>
                <double>0.37</double>
                <double>0.47</double>
                <double>0.1</double>
              </fract_cell>
              <fract_lign>
                <double>0.1</double>
                <double>0.4</double>
                <double>0.09</double>
                <double>0.06</double>
                <double>0.08</double>
                <double>0.9</double>
              </fract_lign>
              <wfpsN2N2O_x>
                <double>22</double>
                <double>88</double>
              </wfpsN2N2O_x>
              <wfpsN2N2O_y>
                <double>0.1</double>
                <double>1</double>
              </wfpsN2N2O_y>
              <oc>
                <double>3.7136764881329496</double>
                <double>2.4698281813043792</double>
                <double>1.2383961716086014</double>
                <double>0.49836009167083023</double>
                <double>0.25025052330473485</double>
                <double>0.15035274660681502</double>
                <double>0.10019396267774858</double>
              </oc>
            </SoilNitrogen>
            <SoilOrganicMatter>
              <Name>SoilOrganicMatter</Name>
              <RootCN>40</RootCN>
              <RootWt>1000</RootWt>
              <SoilCN>12</SoilCN>
              <EnrACoeff>7.4</EnrACoeff>
              <EnrBCoeff>0.2</EnrBCoeff>
              <Thickness>
                <double>150</double>
                <double>150</double>
                <double>200</double>
                <double>150</double>
                <double>250</double>
                <double>300</double>
                <double>300</double>
              </Thickness>
              <Depth>
                <string>0-15</string>
                <string>15-30</string>
                <string>30-50</string>
                <string>50-65</string>
                <string>65-90</string>
                <string>90-120</string>
                <string>120-150</string>
              </Depth>
              <OC>
                <double>3</double>
                <double>1</double>
                <double>0.6</double>
                <double>0.4</double>
                <double>0.25</double>
                <double>0.15</double>
                <double>0.1</double>
              </OC>
              <FBiom>
                <double>0.04</double>
                <double>0.02</double>
                <double>0.02</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0</double>
                <double>0</double>
              </FBiom>
              <FInert>
                <double>0.5</double>
                <double>0.7</double>
                <double>0.83</double>
                <double>0.9</double>
                <double>0.95</double>
                <double>0.99</double>
                <double>0.99</double>
              </FInert>
              <OCUnits>Total</OCUnits>
            </SoilOrganicMatter>
            <InitialWater>
              <Name>Initial water</Name>
              <PercentMethod>EvenlyDistributed</PercentMethod>
              <FractionFull>0.95</FractionFull>
              <DepthWetSoil>NaN</DepthWetSoil>
            </InitialWater>
            <Sample>
              <Name>Initial nitrogen</Name>
              <Thickness>
                <double>150</double>
                <double>150</double>
                <double>200</double>
                <double>150</double>
                <double>250</double>
                <double>300</double>
                <double>300</double>
              </Thickness>
              <NO3>
                <double>50</double>
                <double>50</double>
                <double>50</double>
                <double>50</double>
                <double>50</double>
                <double>50</double>
                <double>50</double>
              </NO3>
              <NH4>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.1</double>
              </NH4>
              <NO3Units>ppm</NO3Units>
              <NH4Units>ppm</NH4Units>
              <SWUnits>Volumetric</SWUnits>
              <OCUnits>Total</OCUnits>
              <PHUnits>Water</PHUnits>
            </Sample>
            <CERESSoilTemperature>
              <Name>CERESSoilTemperature</Name>
            </CERESSoilTemperature>
            <RecordNumber>0</RecordNumber>
            <SoilType>NZ_Sedimentary</SoilType>
            <LocalName>Lismore</LocalName>
            <Site>Winchmore</Site>
            <NearestTown>Ashburton</NearestTown>
            <Region>Canterbury</Region>
            <Country>New Zealand</Country>
            <NaturalVegetation />
            <Latitude>-48.48</Latitude>
            <Longitude>0</Longitude>
          </Soil>
          <Report>
            <Name>Results</Name>
            <ExperimentFactorNames />
            <ExperimentFactorValues />
            <VariableNames>
              <string>[Clock].Today as Date</string>
              <string>[Slurp].Leaf.Wt</string>
              <string>[Slurp].Leaf.LAI</string>
              <string>[Slurp].Leaf.Photosynthesis</string>
              <string>[Slurp].Root.NTakenUp</string>
              <string>sum([Slurp].Root.NTakenUp)</string>
              <string>sum([LismoreSoil].NO3N)</string>
              <string>[Slurp].Root.MaxDailyNUptake</string>
            </VariableNames>
            <EventNames>
              <string>[Clock].EndOfDay</string>
            </EventNames>
          </Report>
          <Plant>
            <Name>Slurp</Name>
            <ResourceName>Slurp</ResourceName>
            <CropType>Slurp</CropType>
            <SowingDate>0001-01-01T00:00:00</SowingDate>
          </Plant>
          <Area>1</Area>
          <Slope>0</Slope>
        </Zone>
      </Simulation>
    </Experiment>
  </Folder>
  <Folder>
    <Name>SlurpOneTwo</Name>
    <Graph>
      <Name>Photosyn</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>-1</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>Photosyn</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Graph>
      <Name>SoilN</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>0</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>sum(LismoreSoil.NO3N)</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Graph>
      <Name>DM</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>-1</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>LeafWt</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Graph>
      <Name>NUptake</Name>
      <Series>
        <Name>CompSlurp</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>-1</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>NTakenUp</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>false</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Graph>
      <Name>IndividualPhoto</Name>
      <Series>
        <Name>Slurp1</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-1663232</ColourArgb>
        <FactorIndexToVaryColours>-1</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>Slurp1.Leaf.Photosynthesis</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>true</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Series>
        <Name>Slurp2</Name>
        <Type>Scatter</Type>
        <XAxis>Bottom</XAxis>
        <YAxis>Left</YAxis>
        <ColourArgb>-16736653</ColourArgb>
        <FactorIndexToVaryColours>-1</FactorIndexToVaryColours>
        <FactorIndexToVaryMarkers>-1</FactorIndexToVaryMarkers>
        <FactorIndexToVaryLines>-1</FactorIndexToVaryLines>
        <Marker>None</Marker>
        <MarkerSize>Normal</MarkerSize>
        <Line>Solid</Line>
        <LineThickness>Normal</LineThickness>
        <TableName>Results</TableName>
        <XFieldName>Date</XFieldName>
        <YFieldName>Slurp2.Leaf.Photosynthesis</YFieldName>
        <ShowInLegend>true</ShowInLegend>
        <IncludeSeriesNameInLegend>true</IncludeSeriesNameInLegend>
        <Cumulative>false</Cumulative>
        <CumulativeX>false</CumulativeX>
        <Filter />
      </Series>
      <Axis>
        <Type>Left</Type>
        <Title />
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <Axis>
        <Type>Bottom</Type>
        <Inverted>false</Inverted>
        <Minimum>NaN</Minimum>
        <Maximum>NaN</Maximum>
        <Interval>NaN</Interval>
      </Axis>
      <LegendPosition>TopRight</LegendPosition>
      <DisabledSeries />
      <IncludeInDocumentation>false</IncludeInDocumentation>
    </Graph>
    <Experiment>
      <Name>Experiment</Name>
      <Factors>
        <Name>Factors</Name>
        <Factor>
          <Name>Factor</Name>
          <Specifications>
            <string>[SlurpSowingRule2].Script.NumSlurps=1,2</string>
          </Specifications>
        </Factor>
      </Factors>
      <Simulation>
        <Name>SlurpTwo</Name>
        <Clock>
          <Name>Clock</Name>
          <StartDate>1980-07-01T00:00:00</StartDate>
          <EndDate>1981-06-30T00:00:00</EndDate>
        </Clock>
        <Weather>
          <Name>Weather</Name>
          <FileName>%root%\Examples\WeatherFiles\lincoln.met</FileName>
          <ExcelWorkSheetName />
        </Weather>
        <Summary>
          <Name>Summary</Name>
        </Summary>
        <SoilArbitrator>
          <Name>SoilArbitrator</Name>
        </SoilArbitrator>
        <Zone>
          <Name>Field</Name>
          <Folder>
            <Name>Managers</Name>
            <Manager>
              <Name>AutomaticFertiliser</Name>
              <Script>
                <AllowFertiliser>no</AllowFertiliser>
                <Depth2SoilN>500</Depth2SoilN>
                <CriticalSoilN>200</CriticalSoilN>
                <FertNAmount>100</FertNAmount>
                <FertType>UreaN</FertType>
                <FertApplicationDepth>1</FertApplicationDepth>
                <FertMinimumDays>1</FertMinimumDays>
              </Script>
              <Code><![CDATA[using System;
using Models.Core;
using Models.PMF;
using Models.Soils;
using APSIM.Shared.Utilities;
using System.Xml.Serialization;

namespace Models
{
	[Serializable]
	public class Script : Model
	{
		[Link] Clock Clock;
		[Link] Fertiliser fertiliser;
		[Link] ISummary summary = null;
		[Link] Soil Soil;

		//User inputs from properties tab
		[Description("Turn ferliser applications on? ")]
		public yesnoType AllowFertiliser { get; set; }
		
		[Description("Depth to calculate available soil N (mm): ")]
		public double Depth2SoilN { get; set; }

		[Description("Minimum available N, triggers an application (kgN/ha): ")]
		public double CriticalSoilN { get; set; }

		[Description("Amount of N fertiliser for each application (kgN/ha): ")]
		public double FertNAmount { get; set; }

		[Description("Type of N fertiliser to apply: ")]
		public Fertiliser.Types FertType { get; set; }

		[Description("Depth at which to apply the fertiliser (mm): ")]
		public double FertApplicationDepth { get; set; }
	   
		[Description("Minimum period between applications (days): ")]
		public double FertMinimumDays { get; set; }
	   
		public enum yesnoType
		{
			/// <summary>a positive answer</summary>
			yes,
			/// <summary>a negative answer</summary>
			no
		}

		[XmlIgnore] public double TopMineralN { get; set; }
		
		private DateTime lastApplicationDate;
		private bool fertiliserIsAllowed;
		private int nLayers;

		[EventSubscribe("StartOfSimulation")]
		private void OnStartOfSimulation(object sender, EventArgs e)
		{
			fertiliserIsAllowed = (AllowFertiliser == yesnoType.yes);
			nLayers = Soil.SoilWater.Thickness.Length;
		}

		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			double daysSinceLastApplication = (Clock.Today - lastApplicationDate).TotalDays;
			
			// get the N stored in the soil
			double depthFromSurface = 0.0;
			double fracLayer = 0.0;
			TopMineralN = 0.0;
			for (int layer = 0; layer < nLayers; layer++)
			{
				fracLayer = Math.Min(1.0, (Depth2SoilN - depthFromSurface) / Soil.SoilWater.Thickness[layer]);
				TopMineralN += (Soil.SoilNitrogen.NO3[layer]
				+ Soil.SoilNitrogen.NH4[layer]
				+ Soil.SoilNitrogen.urea[layer])
				* fracLayer;
				depthFromSurface += Soil.SoilWater.Thickness[layer];
				if (depthFromSurface >= Depth2SoilN)
					layer = nLayers;
			}

			if (fertiliserIsAllowed && (daysSinceLastApplication >= FertMinimumDays) && (TopMineralN <= CriticalSoilN))
			{
				fertiliser.Apply(FertNAmount, FertType, FertApplicationDepth);
				lastApplicationDate = Clock.Today;
			}
		}
	}
}
]]></Code>
            </Manager>
            <Manager>
              <Name>AutomaticIrrigation</Name>
              <Script>
                <allowIrrigation>yes</allowIrrigation>
                <seasonStart>15-Aug</seasonStart>
                <seasonEnd>30-May</seasonEnd>
                <seasonsAllocation>10000</seasonsAllocation>
                <triggerDeficit>75</triggerDeficit>
                <targetDeficit>99</targetDeficit>
                <returndays>1</returndays>
                <maximumAmount>30</maximumAmount>
                <depthPAWC>300</depthPAWC>
              </Script>
              <Code><![CDATA[using System;
using Models.Core;
using Models.PMF;
using Models.Soils;
using System.Xml.Serialization;
using Models.PMF;
using APSIM.Shared.Utilities;

        
namespace Models
{
	[Serializable] 
	[System.Xml.Serialization.XmlInclude(typeof(Model))]
	public class Script : Model
	{
		//Communication to other modules
		[Link] ISummary summary = null;
		[Link] Irrigation Irrigation;
		[Link] Clock Clock;
		[Link] Soil Soil;
		[Link(IsOptional = true)] ICrop existingCrop;
	   
		//User inputs from properties tab
		[Description("Turn irrigation on?")]
		public answerType allowIrrigation { get; set; }
		[Description("Start of irrigation season (dd-MMM)")]
		public string seasonStart { get; set; }
		[Description("End of irrigation season (dd-MMM)")]
		public string seasonEnd { get; set; }
		[Description("Season allocation (mm)")]
		public double seasonsAllocation { get; set; }
		[Description("Deficit to trigger irrigation (% PAWC)")]
		public double triggerDeficit { get; set; }
		[Description("Deficit to stop irrigaton (% PAWC)")]
		public double targetDeficit { get; set; }
		[Description("Minimum days for irrigation to return")]
		public double returndays { get; set; }
		[Description("Maximum irrigation application (mm/day)")]
		public double maximumAmount { get; set; }
		[Description("Depth to calculate PAWC (mm)")]
		public double depthPAWC { get; set; }
	   
		public enum answerType
		{
			/// <summary>a positive answer</summary>
			yes,
			/// <summary>a negative answer</summary>
			no
		}

		//Class members
		[XmlIgnore] public double TopSWdeficit { get; set; }
		[XmlIgnore] public double TopSWC { get; set; }
		[XmlIgnore] public double DaysSinceIrrigation { get; set; }
		[XmlIgnore] public double AmountToApply { get; set; }
		[XmlIgnore] public double SeasonAppliedAmount { get; set; }
		
		private bool IrrigationIsAllowed { get; set; }
		private bool SeasonIsOpen { get; set; }
		private bool CropIsActive { get; set; }
		private bool IrrigatorIsAvailable { get; set; }
		private bool SoilIsDry { get; set; }

		private DateTime StartDate;
		private DateTime EndDate;
		private double TopDUL;
		private double TopLL;
		private int nLayers;
	
		//Calculate static soil variables
		[EventSubscribe("StartOfSimulation")]
		private void OnStartOfSimulation(object sender, EventArgs e)
		{   
			//Set the season dates
			StartDate = DateTime.Parse(seasonStart + "-" + Clock.Today.Year.ToString());
			EndDate = DateTime.Parse(seasonEnd + "-" + Clock.Today.Year.ToString());
			
			//Can we irrigate at all?
			IrrigationIsAllowed = false; 
			if (allowIrrigation == answerType.yes)
				IrrigationIsAllowed = true; 

			//Calculate soil water variables
			double depthFromSurface = 0.0;
			double fracLayer = 0.0;
			nLayers = Soil.SoilWater.Thickness.Length;
			for (int layer = 0; layer < nLayers; layer++)
			{
				fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / Soil.SoilWater.Thickness[layer]);
				TopLL += Soil.SoilWater.LL15mm[layer] * fracLayer;
				TopDUL += Soil.SoilWater.DULmm[layer] * fracLayer;
				depthFromSurface += Soil.SoilWater.Thickness[layer];
				if (depthFromSurface >= depthPAWC)
					layer = nLayers;
			}
		}
	   	  
		//Determine daily requirement for irrigation
		[EventSubscribe("StartOfDay")]
		private void OnStartOfDay(object sender, EventArgs e)
		{
			//Can we irrigate today?		  
			SeasonIsOpen = isBetween(Clock.Today, StartDate, EndDate);

			//Is there a crop in the ground that needs irrigation?
			CropIsActive = false;
			if ((existingCrop != null) && (existingCrop.IsAlive))
				CropIsActive = true;
	      
			//Is the irrigator available?
			IrrigatorIsAvailable = false;
			DaysSinceIrrigation += 1;
			if (DaysSinceIrrigation >= returndays)
				IrrigatorIsAvailable = true;
	      
			//Is the soil dry enough to require irrigation?
			SoilIsDry = false;
			double depthFromSurface = 0.0;
			double fracLayer = 0.0;
			TopSWC = 0.0;
			for (int layer = 0; layer < nLayers; layer++)
			//for (int layer = 0; depthFromSurface < depthPAWC + Soil.SoilWater.Thickness[layer]; layer++)
			{
				fracLayer = Math.Min(1.0, (depthPAWC - depthFromSurface) / Soil.SoilWater.Thickness[layer]);
				TopSWC += Soil.SoilWater.SWmm[layer] * fracLayer;
				depthFromSurface += Soil.SoilWater.Thickness[layer];
				if (depthFromSurface >= depthPAWC)
					layer = nLayers;
			}
			
			TopSWdeficit = TopSWC - TopDUL;
			if (Math.Max(0.0, -TopSWdeficit) >= (TopDUL - TopLL) * (100 - triggerDeficit) / 100)
				SoilIsDry = true;
	            
			//Are all the conditions ratifying irrigation
			if (IrrigationIsAllowed && SeasonIsOpen && CropIsActive && IrrigatorIsAvailable && SoilIsDry)
			{
				//Lets bloody well irrigate then!!!!
				AmountToApply = TopDUL * targetDeficit / 100 - TopSWC;
				AmountToApply = Math.Max(0.0, Math.Min(AmountToApply, seasonsAllocation - SeasonAppliedAmount));
				Irrigation.Apply(AmountToApply);
				DaysSinceIrrigation = 0;
				SeasonAppliedAmount += AmountToApply;
			}
		}
		
		///Checks whether theDate is between iniDate and endDate (non-year specific)
		private bool isBetween(DateTime theDay, DateTime iniDate, DateTime endDate)
		{
			bool result = false;
			if (iniDate.DayOfYear < endDate.DayOfYear)
			{
				// period is within one year, ex: summer in the northern hemisphere
				if ((theDay.DayOfYear >= iniDate.DayOfYear) && (theDay.DayOfYear <= endDate.DayOfYear))
					result = true;
			}
			else
			{
				// period goes over the end of the year, ex: summer in the southern hemisphere
				if ((theDay.DayOfYear >= iniDate.DayOfYear) || (theDay.DayOfYear <= endDate.DayOfYear))
					result = true;
			}
			
			return result;
		}
	}
}
]]></Code>
            </Manager>
            <Manager>
              <Name>SlurpSowingRule2</Name>
              <Script>
                <NumSlurps>2</NumSlurps>
                <CultivarName>StaticCrop</CultivarName>
                <InitialRootDepth>600</InitialRootDepth>
                <SowingDate>1980-07-01</SowingDate>
              </Script>
              <Code><![CDATA[
using System;
using Models.Core;
using Models.PMF;
using APSIM.Shared.Utilities;
        
namespace Models
{
	[Serializable] 
	[System.Xml.Serialization.XmlInclude(typeof(Model))]
	public class Script : Model
	{
		[ScopedLinkByName] Plant Slurp1;
		[ScopedLinkByName] Plant Slurp2;
		[Link] Clock Clock;

		[Description("How many Slurps should be sown?")]
		public int NumSlurps { get; set; }
		[Description("Cultivar")]
		public string CultivarName { get; set; }
		[Description("Initial Root Depth")]
		public double InitialRootDepth { get; set; }
		[Description("Sowing Date")]
		public DateTime SowingDate { get; set; }

               
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == SowingDate)
			{
				Slurp1.Sow(cultivar: CultivarName, population: 1, depth: InitialRootDepth, rowSpacing: 150);
				if (NumSlurps > 1)
					Slurp2.Sow(cultivar: CultivarName, population: 1, depth: InitialRootDepth, rowSpacing: 150);				
			}
		}
	}
}
				]]></Code>
            </Manager>
            <Manager>
              <Name>ResetProduction2</Name>
              <Script>
                <OverRidePath>Leaf.Photosynthesis.FixedValue</OverRidePath>
                <OverRideInteger>5</OverRideInteger>
                <ChangeDate>1980-07-01</ChangeDate>
              </Script>
              <Code><![CDATA[using System;
using Models.Core;
using System.Collections.Generic;
using System.Text;
using Models.PMF;
using Models;
using System.Xml.Serialization;
using APSIM.Shared.Utilities;

namespace Models
{
	[Serializable] 
	public class Script : Model
	{
		[Link] Plant Plant;
		[ScopedLinkByName] Plant Slurp1;
		[ScopedLinkByName] Plant Slurp2;
		[Link] Clock Clock;
		[Link] Zone zone;
		
		[Description("Path for coefficient to be Overwritten")]
		public string OverRidePath { get; set; }
		[Description("Value for new coefficient Integer")]
		public int OverRideInteger { get; set; }
		[Description("Sowing Date")]
		public DateTime ChangeDate { get; set; }
        
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == ChangeDate)
			{
				object ResetValue = OverRideInteger;
				zone.Set("Slurp1." + OverRidePath, ResetValue);
				zone.Set("Slurp2." + OverRidePath, ResetValue);
			}
		}
	}
}
	   ]]></Code>
            </Manager>
            <Manager>
              <Name>ResetLAI2</Name>
              <Script>
                <OverRidePath>Leaf.LAIFunction.FixedValue</OverRidePath>
                <OverRideInteger>5</OverRideInteger>
                <ChangeDate>1980-07-01</ChangeDate>
              </Script>
              <Code><![CDATA[using System;
using Models.Core;
using System.Collections.Generic;
using System.Text;
using Models.PMF;
using Models;
using System.Xml.Serialization;
using APSIM.Shared.Utilities;

namespace Models
{
	[Serializable] 
	public class Script : Model
	{
		[Link] Plant Plant;
		[ScopedLinkByName] Plant Slurp1;
		[ScopedLinkByName] Plant Slurp2;
		[Link] Clock Clock;
		[Link] Zone zone;
		
		[Description("Path for coefficient to be Overwritten")]
		public string OverRidePath { get; set; }
		[Description("Value for new coefficient Integer")]
		public int OverRideInteger { get; set; }
		[Description("Sowing Date")]
		public DateTime ChangeDate { get; set; }
        
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == ChangeDate)
			{
				object ResetValue = OverRideInteger;
				zone.Set("Slurp1." + OverRidePath, ResetValue);
				zone.Set("Slurp2." + OverRidePath, ResetValue);
			}
		}
	}
}
	   ]]></Code>
            </Manager>
            <Manager>
              <Name>ResetManNUptake2</Name>
              <Script>
                <OverRidePath>Root.MaxDailyNUptake.FixedValue</OverRidePath>
                <OverRideInteger>5</OverRideInteger>
                <ChangeDate>1980-07-01</ChangeDate>
              </Script>
              <Code><![CDATA[using System;
using Models.Core;
using System.Collections.Generic;
using System.Text;
using Models.PMF;
using Models;
using System.Xml.Serialization;
using APSIM.Shared.Utilities;

namespace Models
{
	[Serializable] 
	public class Script : Model
	{
		[Link] Plant Plant;
		[ScopedLinkByName] Plant Slurp1;
		[ScopedLinkByName] Plant Slurp2;
		[Link] Clock Clock;
		[Link] Zone zone;
		
		[Description("Path for coefficient to be Overwritten")]
		public string OverRidePath { get; set; }
		[Description("Value for new coefficient Integer")]
		public int OverRideInteger { get; set; }
		[Description("Sowing Date")]
		public DateTime ChangeDate { get; set; }
        
		[EventSubscribe("DoManagement")]
		private void OnDoManagement(object sender, EventArgs e)
		{
			if (Clock.Today.Date == ChangeDate)
			{
				object ResetValue = OverRideInteger;
				zone.Set("Slurp1." + OverRidePath, ResetValue);
				zone.Set("Slurp2." + OverRidePath, ResetValue);
			}
		}
	}
}
	   ]]></Code>
            </Manager>
          </Folder>
          <MicroClimate>
            <Name>MicroClimate</Name>
            <a_interception>0</a_interception>
            <b_interception>0</b_interception>
            <c_interception>0</c_interception>
            <d_interception>0</d_interception>
            <soil_albedo>0.23</soil_albedo>
            <sun_angle>15</sun_angle>
            <soil_heat_flux_fraction>0.4</soil_heat_flux_fraction>
            <night_interception_fraction>0.5</night_interception_fraction>
            <refheight>2</refheight>
            <albedo>0.29366217672824863</albedo>
            <emissivity>0.96</emissivity>
            <RadIntTotal>0</RadIntTotal>
          </MicroClimate>
          <Irrigation>
            <Name>Irrigation</Name>
          </Irrigation>
          <Fertiliser>
            <Name>Fertiliser</Name>
          </Fertiliser>
          <SurfaceOrganicMatter>
            <Name>SurfaceOrganicMatter</Name>
            <ReportAdditions>no</ReportAdditions>
            <ReportRemovals>no</ReportRemovals>
            <ResidueTypes>
              <Name>ResidueTypes</Name>
              <LoadFromResource>ResidueTypes</LoadFromResource>
            </ResidueTypes>
            <TillageTypes>
              <Name>TillageTypesList</Name>
              <TillageType />
            </TillageTypes>
            <Pools>
              <Pool>
                <PoolName>Sward</PoolName>
                <ResidueType>grass</ResidueType>
                <Mass>1000</Mass>
                <CNRatio>15</CNRatio>
                <CPRatio>NaN</CPRatio>
                <StandingFraction>0</StandingFraction>
              </Pool>
            </Pools>
            <PoolName>Sward</PoolName>
            <type>grass</type>
            <mass>1000</mass>
            <standing_fraction>0</standing_fraction>
            <cpr />
            <cnr>15</cnr>
            <CriticalResidueWeight>2000</CriticalResidueWeight>
            <OptimumDecompTemp>20</OptimumDecompTemp>
            <MaxCumulativeEOS>20</MaxCumulativeEOS>
            <CNRatioDecompCoeff>0.277</CNRatioDecompCoeff>
            <CNRatioDecompThreshold>25</CNRatioDecompThreshold>
            <TotalLeachRain>25</TotalLeachRain>
            <MinRainToLeach>10</MinRainToLeach>
            <CriticalMinimumOrganicC>0.004</CriticalMinimumOrganicC>
            <DefaultCPRatio>0</DefaultCPRatio>
            <DefaultStandingFraction>0</DefaultStandingFraction>
            <StandingExtinctCoeff>0.5</StandingExtinctCoeff>
            <FractionFaecesAdded>0.5</FractionFaecesAdded>
          </SurfaceOrganicMatter>
          <SoluteManager>
            <Name>SoluteManager</Name>
          </SoluteManager>
          <Plant>
            <Name>Slurp1</Name>
            <ResourceName>Slurp</ResourceName>
            <CropType>Slurp</CropType>
            <SowingDate>0001-01-01T00:00:00</SowingDate>
          </Plant>
          <Plant>
            <Name>Slurp2</Name>
            <ResourceName>Slurp</ResourceName>
            <CropType>Slurp</CropType>
            <SowingDate>0001-01-01T00:00:00</SowingDate>
          </Plant>
          <Soil>
            <Name>LismoreSoil</Name>
            <Analysis>
              <Name>Analysis</Name>
              <Thickness>
                <double>150</double>
                <double>150</double>
                <double>200</double>
                <double>150</double>
                <double>250</double>
                <double>300</double>
                <double>300</double>
              </Thickness>
              <Rocks>
                <double>0</double>
                <double>0</double>
                <double>10</double>
                <double>40</double>
                <double>60</double>
                <double>70</double>
                <double>70</double>
              </Rocks>
              <Texture />
              <MunsellColour />
              <PH>
                <double>6</double>
                <double>6</double>
                <double>6</double>
                <double>6</double>
                <double>6</double>
                <double>6</double>
                <double>6</double>
              </PH>
              <CEC>
                <double>12.5</double>
                <double>10</double>
                <double>9</double>
                <double>5</double>
                <double>4</double>
                <double>4</double>
                <double>4</double>
              </CEC>
              <ParticleSizeSand>
                <double>15</double>
                <double>20</double>
                <double>25</double>
                <double>35</double>
                <double>40</double>
                <double>40</double>
                <double>40</double>
              </ParticleSizeSand>
              <ParticleSizeSilt>
                <double>65</double>
                <double>65</double>
                <double>63</double>
                <double>57</double>
                <double>54</double>
                <double>55</double>
                <double>55</double>
              </ParticleSizeSilt>
              <ParticleSizeClay>
                <double>20</double>
                <double>15</double>
                <double>12</double>
                <double>8</double>
                <double>6</double>
                <double>5</double>
                <double>5</double>
              </ParticleSizeClay>
              <PHUnits>Water</PHUnits>
              <BoronUnits>HotWater</BoronUnits>
            </Analysis>
            <Water>
              <Name>Water</Name>
              <SoilCrop>
                <Name>SwardSoil</Name>
                <LL>
                  <double>0.15</double>
                  <double>0.14</double>
                  <double>0.06</double>
                  <double>0.02</double>
                  <double>0.01</double>
                  <double>0.01</double>
                  <double>0.01</double>
                </LL>
                <KL>
                  <double>0.1</double>
                  <double>0.1</double>
                  <double>0.08</double>
                  <double>0.04</double>
                  <double>0.01</double>
                  <double>0</double>
                  <double>0</double>
                </KL>
                <XF>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>0</double>
                  <double>0</double>
                </XF>
              </SoilCrop>
              <SoilCrop>
                <Name>RyegrassSoil</Name>
                <LL>
                  <double>0.15</double>
                  <double>0.14</double>
                  <double>0.06</double>
                  <double>0.02</double>
                  <double>0.01</double>
                  <double>0.01</double>
                  <double>0.01</double>
                </LL>
                <KL>
                  <double>0.1</double>
                  <double>0.1</double>
                  <double>0.08</double>
                  <double>0.04</double>
                  <double>0.01</double>
                  <double>0</double>
                  <double>0</double>
                </KL>
                <XF>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>0</double>
                  <double>0</double>
                </XF>
              </SoilCrop>
              <SoilCrop>
                <Name>WhiteCloverSoil</Name>
                <LL>
                  <double>0.15</double>
                  <double>0.14</double>
                  <double>0.06</double>
                  <double>0.02</double>
                  <double>0.01</double>
                  <double>0.01</double>
                  <double>0.01</double>
                </LL>
                <KL>
                  <double>0.1</double>
                  <double>0.1</double>
                  <double>0.08</double>
                  <double>0.04</double>
                  <double>0.01</double>
                  <double>0</double>
                  <double>0</double>
                </KL>
                <XF>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>0</double>
                  <double>0</double>
                </XF>
              </SoilCrop>
              <SoilCrop>
                <Name>Slurp1Soil</Name>
                <LL>
                  <double>0.15</double>
                  <double>0.14</double>
                  <double>0.06</double>
                  <double>0.02</double>
                  <double>0.01</double>
                  <double>0.01</double>
                  <double>0.01</double>
                </LL>
                <KL>
                  <double>0.1</double>
                  <double>0.1</double>
                  <double>0.08</double>
                  <double>0.04</double>
                  <double>0.01</double>
                  <double>0</double>
                  <double>0</double>
                </KL>
                <XF>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>0</double>
                  <double>0</double>
                </XF>
              </SoilCrop>
              <SoilCrop>
                <Name>Slurp2Soil</Name>
                <LL>
                  <double>0.15</double>
                  <double>0.14</double>
                  <double>0.06</double>
                  <double>0.02</double>
                  <double>0.01</double>
                  <double>0.01</double>
                  <double>0.01</double>
                </LL>
                <KL>
                  <double>0.1</double>
                  <double>0.1</double>
                  <double>0.08</double>
                  <double>0.04</double>
                  <double>0.01</double>
                  <double>0</double>
                  <double>0</double>
                </KL>
                <XF>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>1</double>
                  <double>0</double>
                  <double>0</double>
                </XF>
              </SoilCrop>
              <Thickness>
                <double>150</double>
                <double>150</double>
                <double>200</double>
                <double>150</double>
                <double>250</double>
                <double>300</double>
                <double>300</double>
              </Thickness>
              <BD>
                <double>1.3</double>
                <double>1.35</double>
                <double>1</double>
                <double>0.53</double>
                <double>0.31</double>
                <double>0.3</double>
                <double>0.3</double>
              </BD>
              <AirDry>
                <double>0.05</double>
                <double>0.12</double>
                <double>0.055</double>
                <double>0.015</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0.01</double>
              </AirDry>
              <LL15>
                <double>0.15</double>
                <double>0.14</double>
                <double>0.055</double>
                <double>0.015</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0.01</double>
              </LL15>
              <DUL>
                <double>0.36</double>
                <double>0.34</double>
                <double>0.19</double>
                <double>0.065</double>
                <double>0.04</double>
                <double>0.03</double>
                <double>0.03</double>
              </DUL>
              <SAT>
                <double>0.45</double>
                <double>0.43</double>
                <double>0.25</double>
                <double>0.15</double>
                <double>0.11</double>
                <double>0.11</double>
                <double>0.11</double>
              </SAT>
              <KS>
                <double>5000</double>
                <double>2500</double>
                <double>3000</double>
                <double>10000</double>
                <double>17500</double>
                <double>20000</double>
                <double>20000</double>
              </KS>
            </Water>
            <SoilWater>
              <Name>SoilWater</Name>
              <SummerDate>1-Nov</SummerDate>
              <SummerU>6</SummerU>
              <SummerCona>3.5</SummerCona>
              <WinterDate>1-apr</WinterDate>
              <WinterU>2</WinterU>
              <WinterCona>2</WinterCona>
              <DiffusConst>88</DiffusConst>
              <DiffusSlope>35</DiffusSlope>
              <Salb>0.13</Salb>
              <CN2Bare>73</CN2Bare>
              <CNRed>20</CNRed>
              <CNCov>0.8</CNCov>
              <slope>0</slope>
              <discharge_width>0</discharge_width>
              <catchment_area>0</catchment_area>
              <max_pond>0</max_pond>
              <Thickness>
                <double>150</double>
                <double>150</double>
                <double>200</double>
                <double>150</double>
                <double>250</double>
                <double>300</double>
                <double>300</double>
              </Thickness>
              <SWCON>
                <double>0.5</double>
                <double>0.52</double>
                <double>0.55</double>
                <double>0.6</double>
                <double>0.65</double>
                <double>0.65</double>
                <double>0.65</double>
              </SWCON>
              <KLAT>
                <double>0</double>
                <double>0</double>
                <double>0</double>
                <double>0</double>
                <double>0</double>
                <double>0</double>
                <double>0</double>
              </KLAT>
              <residueinterception>0</residueinterception>
            </SoilWater>
            <SoilNitrogen>
              <Name>SoilNitrogen</Name>
              <fom_type>
                <string>default</string>
                <string>manure</string>
                <string>mucuna</string>
                <string>lablab</string>
                <string>shemp</string>
                <string>stable</string>
              </fom_type>
              <fract_carb>
                <double>0.2</double>
                <double>0.3</double>
                <double>0.54</double>
                <double>0.57</double>
                <double>0.45</double>
                <double>0</double>
              </fract_carb>
              <fract_cell>
                <double>0.7</double>
                <double>0.3</double>
                <double>0.37</double>
                <double>0.37</double>
                <double>0.47</double>
                <double>0.1</double>
              </fract_cell>
              <fract_lign>
                <double>0.1</double>
                <double>0.4</double>
                <double>0.09</double>
                <double>0.06</double>
                <double>0.08</double>
                <double>0.9</double>
              </fract_lign>
              <wfpsN2N2O_x>
                <double>22</double>
                <double>88</double>
              </wfpsN2N2O_x>
              <wfpsN2N2O_y>
                <double>0.1</double>
                <double>1</double>
              </wfpsN2N2O_y>
              <oc>
                <double>3.7136764881329496</double>
                <double>2.4698281813043792</double>
                <double>1.2383961716086014</double>
                <double>0.49836009167083023</double>
                <double>0.25025052330473485</double>
                <double>0.15035274660681502</double>
                <double>0.10019396267774858</double>
              </oc>
            </SoilNitrogen>
            <SoilOrganicMatter>
              <Name>SoilOrganicMatter</Name>
              <RootCN>40</RootCN>
              <RootWt>1000</RootWt>
              <SoilCN>12</SoilCN>
              <EnrACoeff>7.4</EnrACoeff>
              <EnrBCoeff>0.2</EnrBCoeff>
              <Thickness>
                <double>150</double>
                <double>150</double>
                <double>200</double>
                <double>150</double>
                <double>250</double>
                <double>300</double>
                <double>300</double>
              </Thickness>
              <Depth>
                <string>0-15</string>
                <string>15-30</string>
                <string>30-50</string>
                <string>50-65</string>
                <string>65-90</string>
                <string>90-120</string>
                <string>120-150</string>
              </Depth>
              <OC>
                <double>3</double>
                <double>1</double>
                <double>0.6</double>
                <double>0.4</double>
                <double>0.25</double>
                <double>0.15</double>
                <double>0.1</double>
              </OC>
              <FBiom>
                <double>0.04</double>
                <double>0.02</double>
                <double>0.02</double>
                <double>0.01</double>
                <double>0.01</double>
                <double>0</double>
                <double>0</double>
              </FBiom>
              <FInert>
                <double>0.5</double>
                <double>0.7</double>
                <double>0.83</double>
                <double>0.9</double>
                <double>0.95</double>
                <double>0.99</double>
                <double>0.99</double>
              </FInert>
              <OCUnits>Total</OCUnits>
            </SoilOrganicMatter>
            <InitialWater>
              <Name>Initial water</Name>
              <PercentMethod>EvenlyDistributed</PercentMethod>
              <FractionFull>0.95</FractionFull>
              <DepthWetSoil>NaN</DepthWetSoil>
            </InitialWater>
            <Sample>
              <Name>Initial nitrogen</Name>
              <Thickness>
                <double>150</double>
                <double>150</double>
                <double>200</double>
                <double>150</double>
                <double>250</double>
                <double>300</double>
                <double>300</double>
              </Thickness>
              <NO3>
                <double>50</double>
                <double>50</double>
                <double>50</double>
                <double>50</double>
                <double>50</double>
                <double>50</double>
                <double>50</double>
              </NO3>
              <NH4>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.1</double>
                <double>0.1</double>
              </NH4>
              <NO3Units>ppm</NO3Units>
              <NH4Units>ppm</NH4Units>
              <SWUnits>Volumetric</SWUnits>
              <OCUnits>Total</OCUnits>
              <PHUnits>Water</PHUnits>
            </Sample>
            <CERESSoilTemperature>
              <Name>CERESSoilTemperature</Name>
            </CERESSoilTemperature>
            <RecordNumber>0</RecordNumber>
            <SoilType>NZ_Sedimentary</SoilType>
            <LocalName>Lismore</LocalName>
            <Site>Winchmore</Site>
            <NearestTown>Ashburton</NearestTown>
            <Region>Canterbury</Region>
            <Country>New Zealand</Country>
            <NaturalVegetation />
            <Latitude>-48.48</Latitude>
            <Longitude>0</Longitude>
          </Soil>
          <Report>
            <Name>Results</Name>
            <ExperimentFactorNames />
            <ExperimentFactorValues />
            <VariableNames>
              <string>[Clock].Today as Date</string>
              <string>([Slurp1].Leaf.Wt+[Slurp2].Leaf.Wt) as LeafWt</string>
              <string>([Slurp1].Leaf.LAI+[Slurp2].Leaf.LAI) as LAI</string>
              <string>([Slurp1].Leaf.Photosynthesis.FixedValue+[Slurp2].Leaf.Photosynthesis.FixedValue) as Photosyn</string>
              <string>([Slurp1].Root.NTakenUp+[Slurp2].Root.NTakenUp) as NTakenUp</string>
              <string>sum([LismoreSoil].NO3N)</string>
              <string>[Slurp1].Leaf.Photosynthesis</string>
              <string>[Slurp2].Leaf.Photosynthesis</string>
            </VariableNames>
            <EventNames>
              <string>[Clock].EndOfDay</string>
            </EventNames>
          </Report>
          <Area>1</Area>
          <Slope>0</Slope>
        </Zone>
      </Simulation>
    </Experiment>
  </Folder>
  <ExplorerWidth>250</ExplorerWidth>
</Simulations>